{
    "version": "https://jsonfeed.org/version/1",
    "title": "åˆ¥åœ¨åœåŸæ™‚èµ°æ•£",
    "subtitle": "",
    "icon": "https://8loser.github.io/assets/favicon.ico",
    "description": "æˆ‘åœ¨å…«æ¨“é–’æ™ƒ",
    "home_page_url": "https://8loser.github.io",
    "items": [
        {
            "id": "https://8loser.github.io/2026/02/10/linux-hid-permission/",
            "url": "https://8loser.github.io/2026/02/10/linux-hid-permission/",
            "title": "Linux HID è£ç½®æ¬Šé™å•é¡Œ",
            "date_published": "2026-02-09T17:21:00.000Z",
            "content_html": "<h1 id=\"å•é¡Œæè¿°\"><a class=\"anchor\" href=\"#å•é¡Œæè¿°\">#</a> å•é¡Œæè¿°</h1>\n<p>ErgoKB åœ¨ Chrome é€²è¡Œ Remap æ™‚ï¼Œé¸æ“‡ HID è£ç½®å¾Œå‡ºç¾ <code>Could not open</code> éŒ¯èª¤è¨Šæ¯ã€‚</p>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<ul>\n<li>OS: EndeavourOS</li>\n<li>éµç›¤: ErgoKB Phoenix v2 åˆ†é›¢å¼äººé«”å·¥å­¸æ©Ÿæ¢°éµç›¤</li>\n</ul>\n<h1 id=\"diagnosis\"><a class=\"anchor\" href=\"#diagnosis\">#</a> Diagnosis</h1>\n<p>æŸ¥çœ‹ HID è£ç½®æ¬Šé™ï¼Œå…¨éƒ¨éƒ½åªæœ‰ root æ‰æœ‰è®€å¯«æ¬Šé™ï¼Œæ‡‰è©²æ˜¯æ¬Šé™å•é¡Œï¼ˆé€™é‚Šçœ‹ä¸å‡ºæ¯å€‹ HID æ˜¯ä»€éº¼è£ç½®ï¼‰</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ls</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/hidraw</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">crw-------</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 243,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  2æœˆ</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  9</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 12:50</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/hidraw0</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">crw-------</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 243,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  2æœˆ</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  9</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 12:50</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/hidraw1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">crw-------</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 243,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  2æœˆ</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  9</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 12:50</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/hidraw2</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">crw-------</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 243,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  2æœˆ</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  9</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 12:50</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/hidraw3</span></span></code></pre>\n<h1 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h1>\n<p>æŸ¥çœ‹è£ç½® VID, PID, å¾—çŸ¥ VID/PID ç‚º <code>1209:2304</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">lsusb</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 003:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 046d:c52b</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Logitech,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Inc.</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Unifying</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Receiver</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 004:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 8087:0029</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Intel</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Corp.</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> AX200</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Bluetooth</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 007:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1209:2304</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Generic</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Phoenix-v2</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0003</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 003</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 004</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0003</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span></code></pre>\n<p>å»ºç«‹è£ç½®å°ˆç”¨ rule æª”æ¡ˆ <code>/etc/udev/rules.d/99-ergokb.rules</code></p>\n<p>å¯«å…¥è¨­å®š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">KERNEL</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hidraw*</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> SUBSYSTEM</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hidraw</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  ATTRS&#123;idVendor&#125;==</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">1209</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ATTRS&#123;idProduct&#125;==</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">2304</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MODE=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">0666</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<p><strong>èªªæ˜ï¼š</strong></p>\n<ul>\n<li>VID/PID ç‚ºå‰›å‰›æŸ¥è©¢åˆ°çš„ <code>1209:2304</code></li>\n<li><code>MODE=&quot;0666&quot;</code> è¨­å®šè£ç½®æ¬Šé™ç‚º <code>rw-rw-rw-</code>ï¼Œå…è¨±æ‰€æœ‰ä½¿ç”¨è€…è®€å¯«</li>\n<li>åŸæœ¬è£ç½®æ¬Šé™æ˜¯ <code>crw------- (600)</code>ï¼Œåªæœ‰ root å¯ä»¥å­˜å–</li>\n<li>æ”¹ç‚º <code>0666</code> å¾Œï¼Œä¸€èˆ¬ä½¿ç”¨è€…ï¼ˆåŒ…å« Chromeï¼‰ä¹Ÿèƒ½å­˜å– HID è£ç½®</li>\n</ul>\n<p>é‡æ–°è¼‰å…¥è¨­å®š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> udevadm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> control</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --reload-rules</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # é‡æ–°è¼‰å…¥ udev è¦å‰‡æª”æ¡ˆ</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> udevadm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> trigger</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                  # è§¸ç™¼äº‹ä»¶ï¼Œå°‡æ–°è¦å‰‡æ‡‰ç”¨åˆ°ç¾æœ‰è¨­å‚™</span></span></code></pre>\n<ul>\n<li><code>udevadm control --reload-rules</code>ï¼šé‡æ–°è®€å– <code>/etc/udev/rules.d/</code> ç›®éŒ„ä¸‹çš„æ‰€æœ‰è¦å‰‡æª”æ¡ˆ</li>\n<li><code>udevadm trigger</code>ï¼šè§¸ç™¼ udev äº‹ä»¶ï¼Œè®“ç³»çµ±é‡æ–°æƒææ‰€æœ‰è¨­å‚™ä¸¦å¥—ç”¨æ–°è¦å‰‡</li>\n</ul>\n<p>åŸ·è¡Œå®Œå¾Œ <span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">å¦‚æœé‚„æ˜¯ä¸è¡Œæˆ‘å‹¸ä½ éµç›¤æ‹”æ‰é‡æ’å•¦</span>ï¼Œé‡æ–°é–‹å•Ÿ remap é é¢å³å¯æ­£å¸¸ä½¿ç”¨ã€‚ ğŸ‰</p>\n<p>å°äº†ï¼Œå¦‚æœåœ¨ Linux OS, é€™ç¯‡å°±æœ‰å¯èƒ½é‡åˆ°é€™å€‹å•é¡Œ; <a href=\"/2025/06/23/node-usb-relay/\">Node.JS æ§åˆ¶ USB ç¹¼é›»å™¨</a></p>\n",
            "tags": [
                "Trouble",
                "Linux",
                "HID",
                "udev"
            ]
        },
        {
            "id": "https://8loser.github.io/2026/02/07/rag-tutorial/",
            "url": "https://8loser.github.io/2026/02/07/rag-tutorial/",
            "title": "RAG æ•™å­¸",
            "date_published": "2026-02-07T02:00:00.000Z",
            "content_html": "<h1 id=\"æ¶æ§‹\"><a class=\"anchor\" href=\"#æ¶æ§‹\">#</a> æ¶æ§‹</h1>\n<p>RAGï¼ˆRetrieval-Augmented Generation; æª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰</p>\n<ul>\n<li>\n<p>R - Retrieval (æª¢ç´¢)<br />\nè³‡æ–™ç«¯ï¼š åŸå§‹æ–‡ä»¶ç¶“é Embedding Model è½‰ç‚ºå‘é‡ï¼Œå­˜å…¥ Vector DBã€‚<br />\næŸ¥è©¢ç«¯ï¼š ä½¿ç”¨è€…å•é¡ŒåŒæ¨£è½‰ç‚ºå‘é‡ï¼Œå»è³‡æ–™åº«é€²è¡Œç›¸ä¼¼åº¦æª¢ç´¢ï¼ˆSimilarity Searchï¼‰ã€‚</p>\n</li>\n<li>\n<p>A - Augmentation (å¢å¼·)<br />\nçµ„åˆï¼š å°‡æª¢ç´¢å‡ºä¾†çš„ã€Œå¤–éƒ¨çŸ¥è­˜ï¼ˆContextï¼‰ã€èˆ‡ã€ŒåŸå§‹å•é¡Œï¼ˆQueryï¼‰ã€æ”¾å…¥ä¸€å€‹ Prompt Template ä¸­ã€‚<br />\nä»»å‹™ï¼š é€™å€‹å‹•ä½œæ˜¯ç‚ºäº†è®“ LLM æ“æœ‰å®ƒåŸæœ¬è¨“ç·´æ•¸æ“šä¸­æ²’æœ‰çš„ç‰¹å®šè³‡è¨Šã€‚</p>\n</li>\n<li>\n<p>G - Generation (ç”Ÿæˆ)<br />\nè¼¸å‡ºï¼š å°‡åŠ å¼·éçš„ Prompt ä¸Ÿçµ¦ LLMã€‚<br />\nå›è¦†ï¼š LLM æ ¹æ“šçµ¦å®šçš„åƒè€ƒè³‡æ–™ç”¢å‡ºç²¾æº–çš„ç­”æ¡ˆã€‚</p>\n</li>\n</ul>\n<p>æˆ‘ç†è§£çš„æ¶æ§‹åœ–<img loading=\"lazy\" src=\"rag-diagram.png\" alt=\"RAG diagram\" /></p>\n<details class=\"danger\"><summary>Gemini ç•«çš„å•¥ç©æ„å…’</summary><div>\n<p><img loading=\"lazy\" src=\"rag-diagram-gemini.png\" alt=\"RAG diagram - Gemini\" /></p>\n</div></details>\n<h1 id=\"éœ€æ±‚\"><a class=\"anchor\" href=\"#éœ€æ±‚\">#</a> éœ€æ±‚</h1>\n<ul>\n<li>embed modelï¼šå°‡è²éŸ³ã€åœ–ç‰‡ã€å½±ç‰‡ã€æ–‡å­—ç­‰è½‰æˆå‘é‡æ•¸å€¼ä½¿ç”¨</li>\n<li>vector dbï¼šå„²å­˜å‘é‡æ•¸æ“šåŠå°æ‡‰å…§å®¹</li>\n<li>LLMï¼šç”Ÿæˆå¼ AI</li>\n</ul>\n<h1 id=\"embedding\"><a class=\"anchor\" href=\"#embedding\">#</a> Embedding</h1>\n<p>ä½¿ç”¨ Sentence-Transformers è¼‰å…¥ embed modelï¼Œå°‡æ–‡å­—è½‰æˆé«˜ç¶­åº¦å‘é‡ç‰¹å¾µã€‚</p>\n<details class=\"info\"><summary>å®‰è£ä¾è³´å¥—ä»¶</summary><div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sentence-transformers</span></span></code></pre>\n</div></details>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-python\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åŠ ä¸Š huggingface çš„é¡åƒç«™é»ç’°å¢ƒè®Šæ•¸ï¼Œé¿å…ä¸‹è¼‰æ¨¡å‹å¤ªæ…¢</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> os</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">os</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">environ</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">HF_ENDPOINT</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">https://hf-mirror.com</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> sentence_transformers </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> SentenceTransformer</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¼‰å…¥æ¨¡å‹</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">model </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> SentenceTransformer</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">all-MiniLM-L6-v2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æº–å‚™æ–‡å­—</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">sentences </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">é€™æ˜¯ä¸€æ®µæ¸¬è©¦æ–‡å­—</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">EndeavourOS é–‹ç™¼ç’°å¢ƒ</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å–å¾— Feature Vector</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">embeddings </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> model</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">sentences</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æŸ¥çœ‹ Shape [å¥å­æ•¸é‡, æ¯å€‹å¥å­çš„ç¶­åº¦]</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¼¸å‡ºæœƒæ˜¯ (2, 384)ï¼Œä»£è¡¨ 2 å€‹å¥å­ï¼Œæ¯å€‹å¥å­ 384 ç¶­, æ˜¯ all-MiniLM-L6-v2 æ¨¡å‹çš„ç‰¹å¾µç¶­åº¦ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"å‘é‡å½¢ç‹€ (embeddings.shape): </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">embeddings</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">shape</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æŸ¥çœ‹å…·é«”æ•¸å€¼ (åªå°å‡ºç¬¬ä¸€å¥çš„å‰ 5 å€‹ç‰¹å¾µå€¼ä½œç‚ºç¯„ä¾‹)</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"ç¬¬ä¸€å¥çš„å‰ 5 å€‹ç‰¹å¾µå€¼: </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">embeddings</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åŸ·è¡Œçµæœ</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å‘é‡å½¢ç‹€ (embeddings.shape): (2, 384)</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¬¬ä¸€å¥çš„å‰ 5 å€‹ç‰¹å¾µå€¼: [0.03097137 0.09432378 0.04806018 0.02745436 0.02937624]</span></span></code></pre>\n<div class=\"note info\">\n<ul>\n<li>é™¤äº† Sentence-Transformers ä¹Ÿå¯ä»¥ç”¨ Ollama è¼‰å…¥ embed modelï¼Œå‘¼å« Ollama API å–å¾—å‘é‡å€¼</li>\n<li>é¸å°æ¨¡å‹å¾ˆé‡è¦ï¼Œæ”¹æˆ <code>paraphrase-multilingual-MiniLM-L12-v2</code> æ¨¡å‹ï¼Œå°ä¸­æ–‡ç†è§£ç¨‹åº¦æ¯”è¼ƒé«˜</li>\n<li>è²éŸ³ã€åœ–ç‰‡ã€å½±ç‰‡ã€æ–‡å­—è½‰ç‚ºé«˜ç¶­åº¦å‘é‡ç‰¹å¾µï¼Œé€™å€‹éç¨‹å« <code>embedding</code></li>\n</ul>\n</div>\n<h1 id=\"vector-db\"><a class=\"anchor\" href=\"#vector-db\">#</a> Vector DB</h1>\n<p>å°‡å‘é‡èˆ‡å…§å®¹å­˜å…¥ vector dbï¼Œå¾ŒçºŒå¯ä»¥æœå°‹è·Ÿå•é¡Œç›¸ä¼¼åº¦é«˜çš„å…§å®¹ï¼Œé€™è£¡é¸ç”¨ Qdrant</p>\n<details class=\"info\"><summary>å®‰è£ä¾è³´å¥—ä»¶</summary><div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sentence-transformers</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> qdrant-client</span></span></code></pre>\n</div></details>\n<details class=\"info\"><summary>å¯ä»¥ç”¨ docker æˆ– podman å•Ÿå‹• Qdrant</summary><div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">podman</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 6333:6333</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 6334:6334</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -v</span><span style=\"color:#999999;--shiki-dark:#666666\"> $</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#998418;--shiki-dark:#B8A965\">pwd</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/qdrant_storage:/qdrant/storage:z</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    docker.io/qdrant/qdrant</span></span></code></pre>\n</div></details>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-python\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> os</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">os</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">environ</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">HF_ENDPOINT</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">https://hf-mirror.com</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> sentence_transformers </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> SentenceTransformer</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> qdrant_client </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> QdrantClient</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> qdrant_client</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">models </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> Distance</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> VectorParams</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> PointStruct</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¼‰å…¥ Embed Model, æ”¹ç”¨ paraphrase-multilingual-MiniLM-L12-v2 å°ä¸­æ–‡ç†è§£ç¨‹åº¦æ¯”è¼ƒå¥½</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">model </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> SentenceTransformer</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">paraphrase-multilingual-MiniLM-L12-v2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å»ºç«‹ Qdrant å®¢æˆ¶ç«¯</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">client </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> QdrantClient</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">127.0.0.1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> port</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">6333</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># collection ä¸å­˜åœ¨å‰‡å»ºç«‹</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># size ç‚º 384, å¿…é ˆè·Ÿ embed model ç¶­åº¦æ­é…</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_name </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">multilingual_notes</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> not</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> client</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_exists</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_name</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    client</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">create_collection</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        vectors_config</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">VectorParams</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">size</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">384</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> distance</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Distance</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">COSINE</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æº–å‚™å¯«å…¥çš„è³‡æ–™</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">documents </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">EndeavourOS ä½¿ç”¨ pacman ä½œç‚ºå¥—ä»¶ç®¡ç†å™¨ã€‚</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Python çš„è™›æ“¬ç’°å¢ƒå¯ä»¥é€é venv æ¨¡çµ„å»ºç«‹ã€‚</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Vector Database è² è²¬å„²å­˜é«˜ç¶­åº¦çš„å‘é‡æ•¸æ“šã€‚</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ç­‰æ˜¥ç¯€ç‰¹è³£å«éš”å£ç‹å”å”è²·çµ¦ä½ </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ç‰›ä»”è¤²ç‰¹è³£æœƒåœ¨ä¸‹é€±æœ«èˆ‰è¡Œï¼Œåˆ¥å¿˜äº†å»çœ‹çœ‹ï¼</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ‰¹æ¬¡ç”¢ç”Ÿæ¯å€‹å…§å®¹çš„å‘é‡, åˆ©ç”¨ GPU åŠ é€Ÿæ‰¹æ¬¡è™•ç†çœæ•ˆèƒ½</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">texts </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">doc</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> doc </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> documents</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">vectors </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> model</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">texts</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å»ºç«‹å‘é‡èˆ‡å…§å®¹è³‡æ–™é»</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">points </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> i</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> doc </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> enumerate</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">documents</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    points</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">append</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">PointStruct</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        id</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">doc</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">id</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        vector</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">vectors</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">i</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">tolist</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        payload</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">page_content</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> doc</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">text</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">]</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ–°å¢è³‡æ–™é»åˆ° Qdrant</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">client</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">upsert</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> points</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">points</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># èªç¾©æœå°‹æ¸¬è©¦</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_text </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">åª½åª½æˆ‘å¥½æƒ³è¦ä¸€å° Steam Deck</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_vector </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> model</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_text</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">tolist</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">search_result </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> client</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_points</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    query</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_vector</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # æœå°‹ç›¸ä¼¼åº¦æœ€é«˜çš„ 5 ç­†</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    limit</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">points</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é¡¯ç¤ºæœå°‹çµæœ</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"--- é‡å°ã€Œ</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query_text</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ã€æœå°‹åˆ°å‰ </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#998418;--shiki-dark:#B8A965\">len</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">search_result</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ç­†ç›¸é—œè³‡æ–™ ---\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> i</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> res </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> enumerate</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">search_result</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    content </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> res</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">payload</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">page_content</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    score </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> res</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">score</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">i</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">+</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">. [åˆ†æ•¸: </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">score</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:.4f</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">content</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åŸ·è¡Œçµæœ</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># --- é‡å°ã€Œåª½åª½æˆ‘å¥½æƒ³è¦ä¸€å° Steam Deckã€æœå°‹åˆ°å‰ 5 ç­†ç›¸é—œè³‡æ–™ ---</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 1. [åˆ†æ•¸: 0.2213] ç­‰æ˜¥ç¯€ç‰¹è³£å«éš”å£ç‹å”å”è²·çµ¦ä½ </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 2. [åˆ†æ•¸: 0.1929] ç‰›ä»”è¤²ç‰¹è³£æœƒåœ¨ä¸‹é€±æœ«èˆ‰è¡Œï¼Œåˆ¥å¿˜äº†å»çœ‹çœ‹ï¼</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 3. [åˆ†æ•¸: -0.0284] Python çš„è™›æ“¬ç’°å¢ƒå¯ä»¥é€é venv æ¨¡çµ„å»ºç«‹ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 4. [åˆ†æ•¸: -0.0446] Vector Database è² è²¬å„²å­˜é«˜ç¶­åº¦çš„å‘é‡æ•¸æ“šã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 5. [åˆ†æ•¸: -0.0561] EndeavourOS ä½¿ç”¨ pacman ä½œç‚ºå¥—ä»¶ç®¡ç†å™¨ã€‚</span></span></code></pre>\n<div class=\"note info\">\n<ul>\n<li>é¤˜å¼¦ç›¸ä¼¼åº¦: æ•¸å€¼åœ¨ <em><strong>-1 ~ 1</strong></em> ä¹‹é–“ åˆ†æ•¸è¶Šé«˜è¶Šå¥½, ä»£è¡¨èªç¾©è¶Šæ¥è¿‘ã€‚å¯ä»¥èª¿æ•´ distance=Distance.COSINE ä¿®æ”¹æˆå…¶ä»–æ¼”ç®—æ³•ã€‚</li>\n<li>Vector db é¸å‹é ˆæ ¹æ“šä½¿ç”¨çš„ embed modelï¼Œéœ€è¦å¯ä»¥å„²å­˜è©² model ä½¿ç”¨çš„ç¶­åº¦</li>\n<li>å¯ä»¥å»ºç«‹ä¸åŒç¶­åº¦çš„ collection</li>\n</ul>\n</div>\n<details class=\"success\"><summary>Qdrant æœ‰ web ç•Œé¢</summary><div>\n<p><img loading=\"lazy\" src=\"qdrant.png\" alt=\"Qdrant\" /></p>\n</div></details>\n<h1 id=\"rag\"><a class=\"anchor\" href=\"#rag\">#</a> RAG</h1>\n<p>è¦é€²è¡Œ RAG é‚„å·® LLM (Large Language Model), LLM å±¬æ–¼ RAG çš„ G (Generate), é€™é‚Šä½¿ç”¨ Ollama è¼‰å…¥ llama3</p>\n<details class=\"info\"><summary>å®‰è£ä¾è³´å¥—ä»¶</summary><div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> langchain-huggingface</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> langchain-qdrant</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> langchain-ollama</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> langchain-core</span></span></code></pre>\n</div></details>\n<details class=\"info\"><summary>åœ¨ Arch Linux å®‰è£ Ollama</summary><div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">yay</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ollama-cuda</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ollama</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æª¢æŸ¥æ˜¯å¦å•Ÿç”¨æˆåŠŸ</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> is-active</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ollama</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¼‰å…¥ llama3 æ¨¡å‹</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ollama</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> llama3</span></span></code></pre>\n</div></details>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-python\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> os</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é¡åƒåŠ é€Ÿï¼ˆå¦‚æœæ¨¡å‹å·²ä¸‹è¼‰å‰‡æœƒè‡ªå‹•è·³éï¼‰</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">os</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">environ</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">HF_ENDPOINT</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">https://hf-mirror.com</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_huggingface </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> HuggingFaceEmbeddings</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_qdrant </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> QdrantVectorStore</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_ollama </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> ChatOllama</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_core</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">prompts </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> ChatPromptTemplate</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_core</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">runnables </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> RunnablePassthrough</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> langchain_core</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">output_parsers </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> StrOutputParser</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># çµ±ä¸€æ¨¡å‹åç¨±ï¼Œè¦è·Ÿå¯«å…¥ vector db æ™‚ä½¿ç”¨çš„æ¨¡å‹ä¸€è‡´</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">EMBEDDING_MODEL_NAME</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">paraphrase-multilingual-MiniLM-L12-v2</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">embeddings </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> HuggingFaceEmbeddings</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">model_name</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">EMBEDDING_MODEL_NAME</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Retrieval - ç”¨æ–¼æª¢ç´¢çš„å‘é‡è³‡æ–™åº«</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">vector_store </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> QdrantVectorStore</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">from_existing_collection</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    embedding</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">embeddings</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    collection_name</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">multilingual_notes</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    url</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">http://127.0.0.1:6333</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Augmentation - å®šç¾©è©¢å• LLM çš„ prompt æ¨¡æ¿</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">template </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"\"\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½ æ˜¯ä¸€å€‹åŸºæ–¼æœ¬åœ°çŸ¥è­˜åº«çš„ AI åŠ©æ‰‹ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">è«‹æ ¹æ“šä»¥ä¸‹æä¾›çš„ã€Œåƒè€ƒè³‡æ–™ã€å›ç­”ã€Œå•é¡Œã€ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å¦‚æœåƒè€ƒè³‡æ–™ä¸­æ²’æœ‰ç›¸é—œç­”æ¡ˆï¼Œè«‹èª å¯¦å‘ŠçŸ¥ä½ ä¸çŸ¥é“ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">[åƒè€ƒè³‡æ–™]:</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">&#123;context&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">[å•é¡Œ]:</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ç”¨ä¸­æ–‡å›ç­” `</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">&#123;question&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">`</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">prompt </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> ChatPromptTemplate</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">from_template</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">template</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æª¢ç´¢è¨­å®š, æª¢ç´¢ç›¸ä¼¼åº¦æœ€é«˜çš„ 2 ç­†è³‡æ–™</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">retriever </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> vector_store</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">as_retriever</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">search_kwargs</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">k</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ–‡æª”æ ¼å¼åŒ–å‡½æ•¸</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">def</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> format_docs</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">docs</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">join</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">doc</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">page_content </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> doc </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> docs</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Generation - ä½¿ç”¨çš„ç”Ÿæˆæ¨¡å‹</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">llm </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> ChatOllama</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">model</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">llama3</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> base_url</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">http://localhost:11434</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ§‹å»º RAG éˆ, åŸ·è¡Œï¼šæœå°‹ Qdrant -> å¡«å…¥æ¨¡æ¿ -> ä¸Ÿçµ¦ Llama3 -> è¼¸å‡ºæ–‡å­—</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">rag_chain </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">        \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">context</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> retriever </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> format_docs</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # å¾å‘é‡åº«æª¢ç´¢ä¸¦æ ¼å¼åŒ–æ–‡æª”</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">        \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">question</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> RunnablePassthrough</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # åŸæ¨£å‚³éç”¨æˆ¶å•é¡Œ</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    |</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> RunnablePassthrough</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">assign</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # prompt - æ¥æ”¶ &#123;context, question&#125;ï¼Œç”Ÿæˆæ ¼å¼åŒ–çš„æç¤ºè©</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # llm - å°‡æç¤ºè©ç™¼é€çµ¦ Llama3 æ¨¡å‹ï¼Œå¾—åˆ° AI å›ç­”</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # StrOutputParser() - å°‡ LLM çš„è¼¸å‡ºï¼ˆé€šå¸¸æ˜¯å€‹ AIMessage å°è±¡ï¼‰è½‰æ›æˆç´”æ–‡å­—å­—ç¬¦ä¸²</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # | æ˜¯ LangChain çš„ LCEL èªæ³•</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        answer</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">prompt </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> llm </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> StrOutputParser</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åŸ·è¡Œå°è©±æ¸¬è©¦</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> __name__</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">__main__</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    query </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">EndeavourOS é©åˆä»€éº¼æ¨£çš„é–‹ç™¼è€…ï¼Ÿ</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æå•ï¼š</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # R - Retrievalï¼šå¾å‘é‡åº«æª¢ç´¢ç›¸é—œæ–‡æª”</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">----------R Retrieval æª¢ç´¢éšæ®µ----------</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    docs </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> retriever</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">invoke</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    formatted_context </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> format_docs</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">docs</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"æª¢ç´¢åˆ°çš„åƒè€ƒè³‡æ–™ï¼ˆ</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#998418;--shiki-dark:#B8A965\">len</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">docs</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ç­†ï¼‰ï¼š</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">formatted_context</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # A - Augmentationï¼šå°‡æª¢ç´¢çµæœå¡«å…¥æç¤ºè©</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">----------A Augmentation å¢å¼·éšæ®µ----------</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    augmented_prompt </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> prompt</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">invoke</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">context</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> formatted_context</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">question</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> query</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"ç”Ÿæˆçš„æç¤ºè©ï¼š</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">augmented_prompt</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">to_string</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # G - Generationï¼šLLM ç”Ÿæˆå›ç­”</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">----------G Generation ç”Ÿæˆéšæ®µ----------</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    result </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> rag_chain</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">invoke</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">query</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"AI å›ç­”ï¼š</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">result</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">answer</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åŸ·è¡Œçµæœ</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æå•ï¼šEndeavourOS é©åˆä»€éº¼æ¨£çš„é–‹ç™¼è€…ï¼Ÿ</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ----------R Retrieval æª¢ç´¢éšæ®µ----------</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æª¢ç´¢åˆ°çš„åƒè€ƒè³‡æ–™ï¼ˆ2 ç­†ï¼‰ï¼š</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># EndeavourOS ä½¿ç”¨ pacman ä½œç‚ºå¥—ä»¶ç®¡ç†å™¨ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Python çš„è™›æ“¬ç’°å¢ƒå¯ä»¥é€é venv æ¨¡çµ„å»ºç«‹ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ----------A Augmentation å¢å¼·éšæ®µ----------</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç”Ÿæˆçš„æç¤ºè©ï¼š</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Human: ä½ æ˜¯ä¸€å€‹åŸºæ–¼æœ¬åœ°çŸ¥è­˜åº«çš„ AI åŠ©æ‰‹ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è«‹æ ¹æ“šä»¥ä¸‹æä¾›çš„ã€Œåƒè€ƒè³‡æ–™ã€å›ç­”ã€Œå•é¡Œã€ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å¦‚æœåƒè€ƒè³‡æ–™ä¸­æ²’æœ‰ç›¸é—œç­”æ¡ˆï¼Œè«‹èª å¯¦å‘ŠçŸ¥ä½ ä¸çŸ¥é“ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># [åƒè€ƒè³‡æ–™]:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># EndeavourOS ä½¿ç”¨ pacman ä½œç‚ºå¥—ä»¶ç®¡ç†å™¨ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Python çš„è™›æ“¬ç’°å¢ƒå¯ä»¥é€é venv æ¨¡çµ„å»ºç«‹ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># [å•é¡Œ]:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç”¨ä¸­æ–‡å›ç­” `EndeavourOS é©åˆä»€éº¼æ¨£çš„é–‹ç™¼è€…ï¼Ÿ`</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ----------G Generation ç”Ÿæˆéšæ®µ----------</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># AI å›ç­”ï¼š</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ ¹æ“šæä¾›çš„åƒè€ƒè³‡æ–™ï¼ŒEndeavourOS ä½¿ç”¨ pacman ä½œç‚ºå¥—ä»¶ç®¡ç†å™¨ã€‚å› æ­¤ï¼Œæˆ‘å€‘å¯ä»¥çŸ¥é“ EndeavourOS æ˜¯ä¸€ç¨® Linux ç™¼è¡Œç‰ˆã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># çµè«–ï¼šEndeavourOS é€‚åˆ Linux é–‹ç™¼è€…çš„éœ€æ±‚ã€‚</span></span></code></pre>\n<div class=\"note info\">\n<ul>\n<li>å¦‚æœåŸæœ¬ç”¨ A æ¨¡å‹å»ºç«‹çš„ db å¾Œä¾†æƒ³æ”¹ B æ¨¡å‹æ€éº¼è¾¦? è¦é€²è¡Œ Re-indexing</li>\n<li>å¾ŒçºŒå¯ä»¥å¢åŠ é¿å…å¹»è¦ºæ©Ÿåˆ¶ï¼Œç›¸ä¼¼åº¦é–¥å€¼åˆ¤å®š, åƒè€ƒè³‡æ–™ä¸è¶³è™•ç†æ©Ÿåˆ¶ç­‰ç­‰...</li>\n</ul>\n</div>\n",
            "tags": [
                "Tutorial",
                "RAG",
                "AI",
                "æª¢ç´¢å¢å¼·ç”Ÿæˆ"
            ]
        },
        {
            "id": "https://8loser.github.io/2025/12/21/deploy-docker-nginx/",
            "url": "https://8loser.github.io/2025/12/21/deploy-docker-nginx/",
            "title": "å¤šæœå‹™ Docker éƒ¨ç½²èˆ‡ Nginx è¨­å®šç­†è¨˜",
            "date_published": "2025-12-21T00:58:03.000Z",
            "content_html": "<h1 id=\"æ–‡ç« èªªæ˜\"><a class=\"anchor\" href=\"#æ–‡ç« èªªæ˜\">#</a> æ–‡ç« èªªæ˜</h1>\n<p>é€™æ˜¯å°‡æœå‹™éƒ¨ç½²åˆ°é›²ç«¯çš„å°ˆæ¡ˆã€‚<br />\nVM å»ºç«‹å¥½å¾Œï¼Œå°‡å°ˆæ¡ˆ pull åˆ° <code>/opt</code> ä¸‹å³å¯å¿«é€Ÿéƒ¨ç½²ã€‚</p>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<p>æ¯å€‹æœå‹™ç¨‹å¼ç¢¼ç”± GitHub è¨—ç®¡ï¼Œä¸¦è¨­ç½®è‡ªå‹•æ‰“åŒ…æˆ Docker imageã€‚<br />\næ©Ÿå™¨å®‰è£ Dockerï¼Œéƒ¨ç½²æ™‚ pull Docker image å•Ÿå‹•å¤šå€‹æœå‹™ containerã€‚<br />\nç”± Nginx æ§åˆ¶è«‹æ±‚é€²å…¥æœå‹™ã€‚</p>\n<h1 id=\"å°ˆæ¡ˆè³‡æ–™å¤¾çµæ§‹\"><a class=\"anchor\" href=\"#å°ˆæ¡ˆè³‡æ–™å¤¾çµæ§‹\">#</a> å°ˆæ¡ˆè³‡æ–™å¤¾çµæ§‹</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>.</span></span>\n<span class=\"line\"><span>â”œâ”€â”€ init.sh                # æ©Ÿå™¨åˆå§‹åŒ–</span></span>\n<span class=\"line\"><span>â”œâ”€â”€ prod</span></span>\n<span class=\"line\"><span>â”‚Â Â  â”œâ”€â”€ docker-compose.yml # æ­£å¼ç«™ Docker Swarm Stack è¨­å®š</span></span>\n<span class=\"line\"><span>â”‚Â Â  â””â”€â”€ nginx.conf         # æ­£å¼ç«™ Nginx è¨­å®š</span></span>\n<span class=\"line\"><span>â”œâ”€â”€ start-prod.sh          # å•Ÿå‹•</span></span>\n<span class=\"line\"><span>â””â”€â”€ stop-prod.sh           # åœæ­¢</span></span></code></pre>\n<p>é¦–å…ˆåŸ·è¡Œ <code>init.sh</code> æ›´æ–°ç³»çµ±ã€å®‰è£å¸¸ç”¨ç¨‹å¼ï¼Œåƒè€ƒ <a href=\"/2023/01/04/gcp-init/\">GCP VM å»ºç½®ç­†è¨˜</a>ã€‚</p>\n<h1 id=\"start-prodsh\"><a class=\"anchor\" href=\"#start-prodsh\">#</a> <a href=\"http://start-prod.sh\">start-prod.sh</a></h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-sh\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#!/bin/sh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å•Ÿå‹•æ­£å¼ç«™ container</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> stack</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> deploy</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --compose-file</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> prod/docker-compose.yml</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --with-registry-auth</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> company</span></span></code></pre>\n<p>é€™é‚Šæ²’ä»€éº¼å¥½ä»‹ç´¹çš„ï¼Œå°±æ˜¯ç”¨ <code>docker stack deploy</code> å•Ÿå‹• Docker Swarm Stackã€‚</p>\n<p><code>--with-registry-auth</code> æœƒæŠŠæœ¬æ©Ÿ <code>docker login</code> çš„ registry èªè­‰ä¸€ä½µå‚³çµ¦ Swarm ç¯€é»ï¼Œ<br />\nè®“ç¯€é»åœ¨æ‹‰ç§æœ‰ image æ™‚èƒ½é †åˆ©é€šéæˆæ¬Šï¼›ä¸åŠ çš„è©±ï¼Œç§æœ‰å€‰åº«å¸¸æœƒå‡ºç¾æ‹‰ä¸åˆ° image çš„éŒ¯èª¤ã€‚</p>\n<h1 id=\"docker-composeyml\"><a class=\"anchor\" href=\"#docker-composeyml\">#</a> docker-compose.yml</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yaml\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ­£å¼ç«™ container</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">version</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">3.8</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">services</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  nginx</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    image</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    restart</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unless-stopped</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    volumes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # Nginx è¨­å®šæª”</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./nginx.conf:/etc/nginx/conf.d/default.conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    environment</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      TZ</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Asia/Taipei</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    ports</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> target</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 80</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        published</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 80</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        protocol</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> tcp</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        mode</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> host</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å¾Œç«¯ API</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  backend</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    image</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ghcr.io/8loser/backend:main</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    restart</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unless-stopped</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    environment</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      TZ</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Asia/Taipei</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å‰ç«¯</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  frontend</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    image</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ghcr.io/8loser/frontend:main</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    restart</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unless-stopped</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    environment</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      TZ</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Asia/Taipei</span></span></code></pre>\n<p>èªªæ˜ï¼š</p>\n<ul>\n<li>æœ‰ 3 å€‹æœå‹™; Nginxã€frontendã€backendã€‚</li>\n<li>Nginx ä¸ç”¨ <code>depends_on backend, frontend</code> é¿å…æŸå€‹æœå‹™ç•°å¸¸å°è‡´ Nginx è¢«ç‰½é€£åœæ­¢ã€‚</li>\n<li>Nginx <code>mode: host</code> ç›´æ¥ç”¨ä¸»æ©Ÿ 80 å°å¤–æä¾›æœå‹™ï¼ŒLoad Balancer æµé‡å°å…¥ Nginx 80 portï¼Œåƒ…æœ‰è·‘è©²æœå‹™çš„ç¯€é»æœƒé–‹ 80ã€‚</li>\n<li>Nginx è¨­å®šæª”ç›´æ¥æ›è¼‰ <code>prod/nginx.conf</code> æª”æ¡ˆã€‚</li>\n<li>Stack æœƒä½¿ç”¨ Swarm overlay networkï¼Œ<code>proxy_pass http://frontend/</code> èˆ‡ <code>proxy_pass http://backend/</code> æœƒè§£æåˆ°åŒä¸€å€‹ Stack çš„ serviceã€‚</li>\n<li><code>ghcr.io</code> æ˜¯ GitHub Container Registryï¼Œç”¨æ–¼å­˜æ”¾ Docker imageã€‚</li>\n</ul>\n<h1 id=\"nginxconf\"><a class=\"anchor\" href=\"#nginxconf\">#</a> nginx.conf</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ­£å¼ç«™ Nginx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é è¨­ server; ä½¿ç”¨ IP æˆ–æœªåŒ¹é…çš„åŸŸåéƒ½æœƒé€²å…¥</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  listen </span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">80</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  server_name </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # ä¸åˆæ³• Host è¨ªå• /ï¼Œä¸è¿”å›å…§å®¹</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 204</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  listen </span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">80</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å…è¨±çš„åŸŸå</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  server_name </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">www.*******.com *******.com</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # Load Balancer Public IP address</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">LB_IP</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">/32</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # å¡«å…¥ä½ çš„ LB IP</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # Google CIDR ç¶²æ®µ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">130.211.0.0/22</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">35.191.0.0/16</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  real_ip_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  real_ip_recursive on</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # é˜»æ“‹çš„ User Agent</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">http_user_agent</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ~* </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"ApacheBench|pingback|YisouSpider|MJ12bot|AhrefsBot|360JK|Jorgee|FeedDemon|BOT/0.1 (BOT for JCE)|CrawlDaddy|Java|Jullo|Feedly|UniversalFeedParser|Swiftbot|YandexBot|jikeSpider|ZmEu phpmyadmin|WinHttp|EasouSpider|HttpClient|Microsoft URL Control|YYSpider|jaunty|oBot|Python-urllib|Indy Library|FlightDeckReports Bot|Linguee Bot\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 101</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # æ­£å¼ç«™è¨­å®š robots.txt å…è¨±çˆ¬èŸ²</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"color:#AB5E3F;--shiki-dark:#C4704F\"> /robots.txt </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    add_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Content-Type text/plain</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 200</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> \"User-agent: *</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Allow: /</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å‰ç«¯</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_pass </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">http://frontend/</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Host </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">host</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Real-IP </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">remote_addr</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">proxy_add_x_forwarded_for</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Custom-Referrer smc_identity_layer</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å¾Œç«¯</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> /api/ </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_pass </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">http://backend/</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Host </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">host</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Real-IP </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">remote_addr</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">proxy_add_x_forwarded_for</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Custom-Referrer smc_identity_layer</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>èªªæ˜ï¼š</p>\n<ul>\n<li>é è¨­ server ç”¨æ–¼æ””æˆªæœªåŒ¹é…çš„ Hostï¼Œç›´æ¥å› 204ã€‚</li>\n<li><code>/</code> èµ° frontendã€<code>/api/</code> èµ° backendï¼Œä½¿ç”¨ <code>proxy_pass</code> è½‰ç™¼è«‹æ±‚ã€‚</li>\n<li><code>set_real_ip_from</code> ç”¨ä¾†é™å®šå¯ä¿¡ä»»çš„è½‰ç™¼ä¾†æºï¼ˆLB èˆ‡ Google CIDRï¼‰ï¼Œæ‰èƒ½æ­£ç¢ºé‚„åŸ client IPï¼Œé¿å…è¢«å½é€ çš„ <code>X-Forwarded-For</code> å½±éŸ¿ã€‚</li>\n<li><code>proxy_pass http://backend/</code> çš„ <code>backend</code> å°æ‡‰ <code>docker-compose.yml</code> çš„ service åç¨±ã€‚</li>\n</ul>\n",
            "tags": [
                "Deploy",
                "GCP",
                "Nginx",
                "log",
                "Docker",
                "Deploy"
            ]
        },
        {
            "id": "https://8loser.github.io/2025/06/23/node-usb-relay/",
            "url": "https://8loser.github.io/2025/06/23/node-usb-relay/",
            "title": "Node.JS æ§åˆ¶ USB ç¹¼é›»å™¨",
            "date_published": "2025-06-23T06:36:42.000Z",
            "content_html": "<h1 id=\"usb-relay\"><a class=\"anchor\" href=\"#usb-relay\">#</a> USB Relay</h1>\n<p>USB relay æ¨¡çµ„å°±æ˜¯é€™å€‹ï¼Œé è¨ˆç”¨ Node.js ç¨‹å¼è¼¸å‡ºé›»æ°£è¨Šè™Ÿæ§åˆ¶æ©Ÿæ¢°æ‰‹è‡‚ï¼Œé€™å€‹æ˜¯å…©è·¯çš„ï¼ˆå…©å€‹ relayï¼‰ï¼Œé‚„æœ‰ä¸€è·¯æˆ–è€…æ›´å¤šè·¯çš„ã€‚</p>\n<p><img loading=\"lazy\" src=\"USB-relay.png\" alt=\"USB Relay\" /></p>\n<p>è¼¸å‡ºæ¥é»è·Ÿä¸€èˆ¬ç¹¼é›»å™¨çš„æ¥é»ä¸€æ¨£</p>\n<table>\n<thead>\n<tr>\n<th>ç«¯é»</th>\n<th>å…¨å</th>\n<th>åŠŸèƒ½æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>COM</td>\n<td>Commonï¼ˆå…±ç”¨ç«¯ï¼‰</td>\n<td>ä¸­å¿ƒç«¯é»ï¼Œæ ¹æ“šæ§åˆ¶æƒ…æ³èˆ‡ NC æˆ– NO æ¥é€š</td>\n</tr>\n<tr>\n<td>NC</td>\n<td>Normally Closedï¼ˆå¸¸é–‰ï¼‰</td>\n<td>åœ¨ <code>æœªé€šé›»</code> ç‹€æ…‹ä¸‹ï¼Œ<code>èˆ‡ COM æ¥é€š</code></td>\n</tr>\n<tr>\n<td>NO</td>\n<td>Normally Openï¼ˆå¸¸é–‹ï¼‰</td>\n<td>åœ¨ <code>æœªé€šé›»</code> ç‹€æ…‹ä¸‹ï¼Œ<code>èˆ‡ COM æ–·é–‹</code>ï¼Œé€šé›»å¾Œæ‰æ¥é€š</td>\n</tr>\n</tbody>\n</table>\n<p>æ¥ç·šæ–¹å¼ä½¿ç”¨ USB-A è½‰ USB-Bï¼ŒUSB-A æ¥é›»è…¦ï¼ŒUSB-B æ¥æ¨¡çµ„</p>\n<p><img loading=\"lazy\" src=\"USB-A-to-USB-B.png\" alt=\"USB-A to USB-B\" /></p>\n<h1 id=\"ç¨‹å¼æ¸¬è©¦\"><a class=\"anchor\" href=\"#ç¨‹å¼æ¸¬è©¦\">#</a> ç¨‹å¼æ¸¬è©¦</h1>\n<p>ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/node-hid\">node-hid</a> å¥—ä»¶ï¼Œè«‹å…ˆç¢ºå®šä½¿ç”¨çš„æ¨¡çµ„æ”¯æ´ HID</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-javascript\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> HID</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> require</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">node-hid</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å°‹æ‰¾é€£æ¥è£ç½®ä¸­ USBRelay åç¨±çš„è£ç½®</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> deviceList</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> HID</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">devices</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> connectedRelays</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> deviceList</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">product</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">product</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">indexOf</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">USBRelay</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> !==</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> device</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> new</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> HID</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">HID</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">connectedRelays</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">path</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å•Ÿå‹•ç¬¬ä¸€å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x01</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å•Ÿå‹•ç¬¬äºŒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x02</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—œé–‰ç¬¬ä¸€å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x01</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—œé–‰ç¬¬äºŒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x02</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<p>å¦‚æœæ­£å¸¸å•Ÿå‹•ç¹¼é›»å™¨æ™‚ï¼Œæ¨¡çµ„ä¸Šå°æ‡‰çš„ç¹¼é›»å™¨æ— LED æœƒäº®</p>\n<h1 id=\"è¨­å®š-bytes-èªªæ˜\"><a class=\"anchor\" href=\"#è¨­å®š-bytes-èªªæ˜\">#</a> è¨­å®š Bytes èªªæ˜</h1>\n<table>\n<thead>\n<tr>\n<th>Byte ä½ç½®</th>\n<th>èªªæ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>å‘½ä»¤æ¨™é ­ï¼ˆé€šå¸¸æ˜¯å›ºå®šå€¼ï¼‰</td>\n</tr>\n<tr>\n<td>1</td>\n<td>æ§åˆ¶å‘½ä»¤</td>\n</tr>\n<tr>\n<td>2</td>\n<td>è¦æ§åˆ¶çš„ç¹¼é›»å™¨ä½å…ƒçµ„ï¼ˆbitmaskï¼‰</td>\n</tr>\n<tr>\n<td>3~8</td>\n<td>å……å¡«ä½å…ƒ</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"ç¨‹å¼è¨­è¨ˆæ€è·¯\"><a class=\"anchor\" href=\"#ç¨‹å¼è¨­è¨ˆæ€è·¯\">#</a> ç¨‹å¼è¨­è¨ˆæ€è·¯</h1>\n<ul>\n<li>ä½¿ç”¨ class</li>\n<li>constructor é€²è¡Œ init, å¯æŒ‡å®š device path æˆ–è‡ªå‹•æœå°‹</li>\n<li>æ¯å€‹ relay on/off ä½¿ç”¨çš„ bytes ç”¨ list å„²å­˜</li>\n<li>setOff(channelNumber), setOn(channelNumber)</li>\n<li>æ ¹æ“šæ©Ÿæ¢°æ‰‹è‡‚å‹•ä½œå®šç¾©, ActionOK(), ActionNG()</li>\n<li>åˆ‡ç‚º on ä¹‹å¾Œå¤šä¹…å¾©æ­¸åŸç‹€æ…‹å¯èª¿æ•´</li>\n</ul>\n<h1 id=\"éƒ¨ä»½ç¨‹å¼ç¢¼\"><a class=\"anchor\" href=\"#éƒ¨ä»½ç¨‹å¼ç¢¼\">#</a> éƒ¨ä»½ç¨‹å¼ç¢¼</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-javascript\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å•Ÿå‹•ç¬¬å¹¾å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">setOn</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">number</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> commandList</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // all</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFE</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸€å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x01</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬äºŒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x02</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸‰å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x03</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å››å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x04</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬äº”å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x05</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å…­å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x06</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸ƒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x07</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å…«å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFF</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x08</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    this</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">commandList</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">number</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-javascript\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—œé–‰ç¬¬å¹¾å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">setOff</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">number</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> commandList</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // all</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFC</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸€å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x01</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬äºŒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x02</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸‰å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x03</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å››å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x04</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬äº”å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x05</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å…­å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x06</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬ä¸ƒå€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x07</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ç¬¬å…«å€‹ relay</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0xFD</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x08</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0x00</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    this</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">device</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sendFeatureReport</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">commandList</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">number</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-javascript\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ActionOK</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // relay 1 ä½œç‚º OK è¨Šè™Ÿ</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    this</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">setOn</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-javascript\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ActionNG</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // relay 2 ä½œç‚º NG è¨Šè™Ÿ</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    this</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">setOn</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h1 id=\"å‚™è¨»\"><a class=\"anchor\" href=\"#å‚™è¨»\">#</a> å‚™è¨»</h1>\n<ul>\n<li>æ³¨æ„è¼¸å‡ºæ§åˆ¶å¯æ‰¿å—è² è¼‰ç¯„åœï¼Œé€šå¸¸åœ¨ç¹¼é›»å™¨ä¸Šæœƒæ¨™ç¤º</li>\n<li>éœ€è¦ HID æ”¯æ´çš„æ¨¡çµ„</li>\n<li>åƒè€ƒ <a href=\"https://github.com/josephdadams/USBRelay\">https://github.com/josephdadams/USBRelay</a></li>\n<li>æ¨¡çµ„ç”± USB ä¾›é›», æ‹”æ‰å¾Œ relay ç‹€æ…‹æœƒé‡ç½®</li>\n</ul>\n",
            "tags": [
                "Node.js",
                "USB Relay"
            ]
        },
        {
            "id": "https://8loser.github.io/2024/11/08/gcp-mutual-tls/",
            "url": "https://8loser.github.io/2024/11/08/gcp-mutual-tls/",
            "title": "GCP mTLS(mutual TLS) æ†‘è­‰è¨­å®š",
            "date_published": "2024-11-08T15:38:07.000Z",
            "content_html": "<h1 id=\"ç·£ç”±\"><a class=\"anchor\" href=\"#ç·£ç”±\">#</a> ç·£ç”±</h1>\n<p>æœ‰ä¸€ç¶²ç«™éœ€è¦é™åˆ¶åªæœ‰ç‰¹å®šäººå“¡æ‰å¯ç€è¦½ï¼Œé€šå¸¸æœƒä½¿ç”¨ä¾†æº IP é€²è¡Œé™åˆ¶ï¼Œè‹¥æ˜¯ç„¡å›ºå®šè¾¦å…¬å®¤äººå“¡ï¼ˆæ¥­å‹™ï¼‰å‰‡ä½¿ç”¨ VPN é€£å…¥å…¬å¸ç¶²è·¯ç²å¾—å…è¨± IPã€‚</p>\n<p>ä½†å› ç‚ºå…¬å¸æ²’æœ‰è‡ªå·±çš„ç¶²è·¯ï¼Œæ‰€ä»¥æ²’è¾¦æ³•ä½¿ç”¨é€™å€‹æ–¹æ³•ï¼Œå› æ­¤æ¡ç”¨ mTLSã€‚</p>\n<p>ä¸€èˆ¬ç¶²ç«™æ†‘è­‰åªæ˜¯å–®å‘ç”¨æ–¼é©—è­‰ç¶²ç«™æ˜¯å¦åˆæ³•ï¼ŒmTLS å‰‡æ˜¯é›™å‘é©—è­‰ <span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">é›™å‘å¥”èµ´çš„æ†‘è­‰</span>ï¼Œé™¤äº†é©—è­‰ç¶²ç«™æ˜¯å¦åˆæ³•å¤–ï¼Œä¹Ÿé©—è­‰é€£æ¥ç«¯ (client, browser) æ˜¯å¦åˆæ³•ã€‚</p>\n<p>å®˜æ–¹æ–‡ä»¶å…¶å¯¦æœ‰æ•™å­¸(<a href=\"https://cloud.google.com/load-balancing/docs/https/setting-up-mtls-ccm\">Set up mutual TLS with user-provided certificates</a>)ï¼Œä½†æ˜¯å®˜æ–¹æ–‡ä»¶éƒ½æ˜¯é€é gcloud è¨­å®šï¼Œæ‰€ä»¥é€™ç¯‡ç´€éŒ„ä¸€ä¸‹æ€éº¼ä½¿ç”¨ GUI æ–¹å¼è¨­å®šã€‚</p>\n<p>æ€è·¯ï¼šå¾ load balance ä¸‹æ‰‹ï¼Œåœ¨ load balance é€²è¡Œé©—è­‰ï¼Œclient åˆæ³•æ‰å°å…¥å¾Œç«¯ã€‚</p>\n<h1 id=\"éœ€æ±‚\"><a class=\"anchor\" href=\"#éœ€æ±‚\">#</a> éœ€æ±‚</h1>\n<p>å…ˆå®‰è£ openssl ç”¨æ–¼ç”¢ç”Ÿæ†‘è­‰</p>\n<h1 id=\"ç”¢ç”Ÿæ ¹æ†‘è­‰\"><a class=\"anchor\" href=\"#ç”¢ç”Ÿæ ¹æ†‘è­‰\">#</a> ç”¢ç”Ÿæ ¹æ†‘è­‰</h1>\n<h2 id=\"æ†‘è­‰è¨­å®šæª”\"><a class=\"anchor\" href=\"#æ†‘è­‰è¨­å®šæª”\">#</a> æ†‘è­‰è¨­å®šæª”</h2>\n<p>å»ºç«‹æ†‘è­‰è¨­å®šæª” <code>example.cnf</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>[req]</span></span>\n<span class=\"line\"><span>distinguished_name = empty_distinguished_name</span></span>\n<span class=\"line\"><span>[empty_distinguished_name]</span></span>\n<span class=\"line\"><span># Kept empty to allow setting via -subj command line arg.</span></span>\n<span class=\"line\"><span>[ca_exts]</span></span>\n<span class=\"line\"><span>basicConstraints=critical,CA:TRUE</span></span>\n<span class=\"line\"><span>keyUsage=keyCertSign</span></span>\n<span class=\"line\"><span>extendedKeyUsage=clientAuth</span></span></code></pre>\n<h2 id=\"æ ¹æ†‘è­‰èˆ‡å¯†é‘°\"><a class=\"anchor\" href=\"#æ ¹æ†‘è­‰èˆ‡å¯†é‘°\">#</a> æ ¹æ†‘è­‰èˆ‡å¯†é‘°</h2>\n<p>ä½¿ç”¨ openssl ç”¢ç”Ÿæ ¹æ†‘è­‰å¯†é‘° <code>root.key</code> èˆ‡æ ¹æ†‘è­‰ <code>root.cert</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -x509</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -new</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -sha256</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -newkey</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rsa:2048</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -nodes</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -days</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3650</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -subj</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/CN=root</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -config</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> example.cnf</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -extensions</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ca_exts</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -keyout</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root.cert</span></span></code></pre>\n<h1 id=\"ç”¢ç”Ÿä¸­ç¹¼æ†‘è­‰\"><a class=\"anchor\" href=\"#ç”¢ç”Ÿä¸­ç¹¼æ†‘è­‰\">#</a> ç”¢ç”Ÿä¸­ç¹¼æ†‘è­‰</h1>\n<h2 id=\"ä¸­ç¹¼æ†‘è­‰ç°½åè«‹æ±‚\"><a class=\"anchor\" href=\"#ä¸­ç¹¼æ†‘è­‰ç°½åè«‹æ±‚\">#</a> ä¸­ç¹¼æ†‘è­‰ç°½åè«‹æ±‚</h2>\n<p>ç”¢ç”Ÿä¸­ç¹¼æ†‘è­‰å¯†é‘° <code>int.key</code> è·Ÿä¸­ç¹¼æ†‘è­‰ç°½åè«‹æ±‚ <code>int.req</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -new</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -sha256</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -newkey</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rsa:2048</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -nodes</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -subj</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/CN=int</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -config</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> example.cnf</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -extensions</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ca_exts</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -keyout</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.req</span></span></code></pre>\n<h2 id=\"ä¸­ç¹¼æ†‘è­‰\"><a class=\"anchor\" href=\"#ä¸­ç¹¼æ†‘è­‰\">#</a> ä¸­ç¹¼æ†‘è­‰</h2>\n<p>ç”¢ç”Ÿä¸­ç¹¼æ†‘è­‰ <code>int.cert</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> x509</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -CAkey</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -CA</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root.cert</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -set_serial</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -days</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3650</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -extfile</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> example.cnf</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -extensions</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ca_exts</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">    -in</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.cert</span></span></code></pre>\n<h1 id=\"å»ºç«‹ä¿¡ä»»è¨­å®š\"><a class=\"anchor\" href=\"#å»ºç«‹ä¿¡ä»»è¨­å®š\">#</a> å»ºç«‹ä¿¡ä»»è¨­å®š</h1>\n<p>å¾ <a href=\"https://console.cloud.google.com/security/ccm/list/trustConfigs\">https://console.cloud.google.com/security/ccm/list/trustConfigs</a> å»ºç«‹ä¿¡ä»»è¨­å®š<br />\næŠŠå‰é¢æ­¥é©Ÿç”¢ç”Ÿçš„ <code>root.cert</code> å…§å®¹å¢åŠ åˆ°ä¿¡ä»»éŒ¨é»ã€<code>int.cert</code> å…§å®¹å¢åŠ åˆ°ä¸­ç¹¼ CAã€‚</p>\n<p><img loading=\"lazy\" src=\"trust-config.jpg\" alt=\"ä¿¡ä»»è¨­å®š\" /></p>\n<h1 id=\"å»ºç«‹ç”¨æˆ¶ç«¯é©—è­‰\"><a class=\"anchor\" href=\"#å»ºç«‹ç”¨æˆ¶ç«¯é©—è­‰\">#</a> å»ºç«‹ç”¨æˆ¶ç«¯é©—è­‰</h1>\n<p>å¾ <a href=\"https://console.cloud.google.com/net-security/clientauth/serverTlsPolicies\">https://console.cloud.google.com/net-security/clientauth/serverTlsPolicies</a> å»ºç«‹ç”¨æˆ¶ç«¯é©—è­‰<br />\nç”¨æˆ¶ç«¯é©—è­‰æ¨¡å¼é¸æ“‡ <code>è² è¼‰å¹³è¡¡</code> ä»¥åŠ <code>æ‹’çµ•ç„¡æ•ˆçš„ç”¨æˆ¶æ†‘è­‰</code>ï¼Œä¿¡ä»»è¨­å®šé¸å–å‰ä¸€æ­¥é©Ÿå»ºç«‹çš„è¨­å®šæª”ã€‚<br />\n<img loading=\"lazy\" src=\"client-auth.jpg\" alt=\"ç”¨æˆ¶ç«¯é©—è­‰\" /></p>\n<h1 id=\"è² è¼‰å¹³è¡¡è¨­å®š\"><a class=\"anchor\" href=\"#è² è¼‰å¹³è¡¡è¨­å®š\">#</a> è² è¼‰å¹³è¡¡è¨­å®š</h1>\n<p><a href=\"https://console.cloud.google.com/net-services/loadbalancing/list/loadBalancers\">https://console.cloud.google.com/net-services/loadbalancing/list/loadBalancers</a><br />\nåœ¨è² è¼‰å¹³è¡¡çš„å‰ç«¯è¨­å®šè™•ï¼Œé¸å–å‰›å»ºç«‹çš„ç”¨æˆ¶ç«¯é©—è­‰ï¼Œå¯èƒ½ä¸æœƒé¦¬ä¸Šç”Ÿæ•ˆï¼Œå¦‚æœç”Ÿæ•ˆå¾Œé–‹å•Ÿç¶²å€æœƒæ˜¯ <code>ERR_CONNECTION_CLOSED</code> çš„è¨Šæ¯ã€‚</p>\n<p><img loading=\"lazy\" src=\"load-balance.jpg\" alt=\"è² è¼‰å¹³è¡¡\" /></p>\n<h1 id=\"å»ºç«‹ç”¨æˆ¶ç«¯æ†‘è­‰\"><a class=\"anchor\" href=\"#å»ºç«‹ç”¨æˆ¶ç«¯æ†‘è­‰\">#</a> å»ºç«‹ç”¨æˆ¶ç«¯æ†‘è­‰</h1>\n<h2 id=\"ç”¨æˆ¶ç«¯è¨­å®šæª”\"><a class=\"anchor\" href=\"#ç”¨æˆ¶ç«¯è¨­å®šæª”\">#</a> ç”¨æˆ¶ç«¯è¨­å®šæª”</h2>\n<p>å»ºç«‹ç”¨æˆ¶ç«¯è¨­å®šæª” <code>client.config</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>[req]</span></span>\n<span class=\"line\"><span>default_bits              = 2048</span></span>\n<span class=\"line\"><span>req_extensions            = extension_requirements</span></span>\n<span class=\"line\"><span>distinguished_name        = dn_requirements</span></span>\n<span class=\"line\"><span>prompt                    = no</span></span>\n<span class=\"line\"><span></span></span>\n<span class=\"line\"><span>[extension_requirements]</span></span>\n<span class=\"line\"><span>basicConstraints          = critical, CA:FALSE</span></span>\n<span class=\"line\"><span>keyUsage                  = critical, nonRepudiation, digitalSignature, keyEncipherment</span></span>\n<span class=\"line\"><span>extendedKeyUsage          = clientAuth</span></span>\n<span class=\"line\"><span></span></span>\n<span class=\"line\"><span>[dn_requirements]</span></span>\n<span class=\"line\"><span>countryName               = US</span></span>\n<span class=\"line\"><span>stateOrProvinceName       = California</span></span>\n<span class=\"line\"><span>localityName              = San Francisco</span></span>\n<span class=\"line\"><span>0.organizationName        = example</span></span>\n<span class=\"line\"><span>organizationalUnitName    = test</span></span>\n<span class=\"line\"><span>commonName                = test.example.com</span></span>\n<span class=\"line\"><span>emailAddress              = test@example.com</span></span></code></pre>\n<h2 id=\"ç”¢ç”Ÿç”¨æˆ¶å¯†é‘°èˆ‡ç°½åè«‹æ±‚\"><a class=\"anchor\" href=\"#ç”¢ç”Ÿç”¨æˆ¶å¯†é‘°èˆ‡ç°½åè«‹æ±‚\">#</a> ç”¢ç”Ÿç”¨æˆ¶å¯†é‘°èˆ‡ç°½åè«‹æ±‚</h2>\n<p>æœƒç”¢ç”Ÿ <code>client.key</code>, <code>client.csr</code>ã€‚é€™é‚Šæœƒè©¢å•é‡‘é‘°å¯†ç¢¼ï¼Œå¾Œé¢åŒ¯å‡ºæ™‚æœƒç”¨åˆ°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -new</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -keyout</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.csr</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -config</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.config</span></span></code></pre>\n<h2 id=\"ç”¢ç”Ÿç”¨æˆ¶ç«¯æ†‘è­‰\"><a class=\"anchor\" href=\"#ç”¢ç”Ÿç”¨æˆ¶ç«¯æ†‘è­‰\">#</a> ç”¢ç”Ÿç”¨æˆ¶ç«¯æ†‘è­‰</h2>\n<p>ä½¿ç”¨ <code>int.cert</code>ã€<code>int.key</code>ã€<code>client.csr</code> ç”¢ç”Ÿç”¨æˆ¶ç«¯æ†‘è­‰ <code>client.cert</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> x509</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -req</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -in</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.csr</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.cert</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -extfile</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.config</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -extensions</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> extension_requirements</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -days</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 365</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -CA</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.cert</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -CAkey</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> int.key</span></span></code></pre>\n<p>æ¸¬è©¦</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -v</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -k</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --key</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --cert</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.cert</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://ç¶²å€</span></span></code></pre>\n<h1 id=\"ç€è¦½å™¨åŒ¯å…¥æ†‘è­‰\"><a class=\"anchor\" href=\"#ç€è¦½å™¨åŒ¯å…¥æ†‘è­‰\">#</a> ç€è¦½å™¨åŒ¯å…¥æ†‘è­‰</h1>\n<p>server ç«¯å¤§è‡´ä¸Šè¨­ç½®å®Œæˆï¼Œé‚„éœ€è¨­å®š client ç«¯ï¼Œclient åŒ¯å…¥æ†‘è­‰é€™é‚Šä½¿ç”¨ <code>PKCS #12</code> æ ¼å¼ã€‚<br />\né¦–å…ˆå°‡ <code>client.key</code>ã€<code>client.cert</code> å°è£ã€‚æœƒç”¢ç”Ÿ <code>client.p12</code>ã€‚<br />\né€™é‚Šæœƒè©¢å•å‰›å‰›ç”¢ç”Ÿ <code>client.key</code> æ™‚çš„é‡‘é‘°å¯†ç¢¼ï¼Œé©—è­‰å¾Œæœƒå†è©¢å•é‡‘é‘°åŒ¯å‡ºå¯†ç¢¼ï¼Œåœ¨åŒ¯å…¥æ™‚æœƒéœ€è¦ (å¯ä¸è¨­ç½®)ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">openssl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pkcs12</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -export</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -inkey</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.key</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -in</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.cert</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -out</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client.p12</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -name</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">client-cert</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<h2 id=\"æ†‘è­‰åŒ¯å…¥\"><a class=\"anchor\" href=\"#æ†‘è­‰åŒ¯å…¥\">#</a> æ†‘è­‰åŒ¯å…¥</h2>\n<p>åœ¨ Windowsã€Linux æ¡Œé¢ç’°å¢ƒå¤§è‡´ä¸Šéƒ½ç›´æ¥é»å…©ä¸‹ <code>client.p12</code> å¾Œè¼¸å…¥åŒ¯å‡ºå¯†ç¢¼å³å¯ã€‚ä¹‹å¾Œå¯é–‹å•Ÿç€è¦½å™¨æŸ¥çœ‹ç¶²ç«™æ˜¯å¦å¯æ­£å¸¸ç€è¦½ã€‚</p>\n<p>macOS å¯èƒ½æœƒå‡ºç¾ä¸€ç›´è©¢å•å¯†ç¢¼ (åŒ¯å‡ºå¯†ç¢¼éŒ¯èª¤) çš„æƒ…æ³ï¼Œå¼·è€…æˆ‘åŒäº‹èªªæ˜¯å› ç‚º <code>openssl</code> ç‰ˆæœ¬å·®ç•°é—œä¿‚ï¼Œä½¿ç”¨èˆŠç‰ˆçš„ <code>openssl</code> é‡æ–°åŒ¯å‡º p12 æ†‘è­‰å³å¯ã€‚</p>\n<p>macOS é‚„éœ€è¦å¾ <code>é‘°åŒ™åœˆ</code> è¨­å®šæ†‘è­‰çš„å­˜å–æ¬Šé™ç‚ºä¸€å¾‹å…è¨±ï¼Œå¦å‰‡åœ¨ç€è¦½ç¶²ç«™çš„æ™‚å€™ï¼Œæœƒä¸€ç›´å‡ºç¾è©¢å•å¯†ç¢¼è«‹æ±‚å…è¨±çš„æƒ…æ³ã€‚</p>\n",
            "tags": [
                "Step By Step",
                "GCP",
                "mutual TLS",
                "æ†‘è­‰",
                "SSL"
            ]
        },
        {
            "id": "https://8loser.github.io/2024/06/17/dev-container-bind-source-error/",
            "url": "https://8loser.github.io/2024/06/17/dev-container-bind-source-error/",
            "title": "bind source path does not exist",
            "date_published": "2024-06-16T16:38:53.000Z",
            "content_html": "<h1 id=\"å•é¡Œæè¿°\"><a class=\"anchor\" href=\"#å•é¡Œæè¿°\">#</a> å•é¡Œæè¿°</h1>\n<p>DevContainer å•Ÿå‹• container éŒ¯èª¤ï¼ŒæŸ¥çœ‹éŒ¯èª¤è¨Šæ¯å¦‚ä¸‹<br />\n<code>Error response from daemon: invalid mount config for type &quot;bind&quot;: bind source path does not exist: /run/user/1000/wayland-0</code></p>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<ul>\n<li>OS: EndeavourOS</li>\n<li>åœ¨ VSCode ä½¿ç”¨ Dev Container å¥—ä»¶å•Ÿå‹• container</li>\n</ul>\n<h1 id=\"ä¿®æ­£æ–¹æ³•\"><a class=\"anchor\" href=\"#ä¿®æ­£æ–¹æ³•\">#</a> ä¿®æ­£æ–¹æ³•</h1>\n<p>åˆªé™¤ä¸‹é¢å…©å€‹æª”æ¡ˆ</p>\n<ul>\n<li>/run/user/1000/wayland-0</li>\n<li>/run/user/1000/wayland-0.lock</li>\n</ul>\n",
            "tags": [
                "Trouble",
                "VSCode",
                "Remote Container"
            ]
        },
        {
            "id": "https://8loser.github.io/2024/06/16/shokaX-waline-comment/",
            "url": "https://8loser.github.io/2024/06/16/shokaX-waline-comment/",
            "title": "Hexo ShokaX ä¸»é¡Œä½¿ç”¨ Waline ç•™è¨€ç‰ˆ",
            "date_published": "2024-06-15T17:17:17.000Z",
            "content_html": "<h1 id=\"ä½ˆç½²-waline-server-ç«¯\"><a class=\"anchor\" href=\"#ä½ˆç½²-waline-server-ç«¯\">#</a> ä½ˆç½² Waline server ç«¯</h1>\n<p>åƒè€ƒ Waline ä½ˆç½²æ•™å­¸ç¶²ç«™ <a href=\"https://waline.js.org/guide/deploy/vercel.html\">https://waline.js.org/guide/deploy/vercel.html</a> ï¼Œé»é¸ Deploy æŒ‰éˆ•ï¼Œæœƒè·³è½‰ Vercel é é¢å»ºç«‹ Waline serverã€‚</p>\n<p><img loading=\"lazy\" src=\"vercel-deploy.png\" alt=\"Vercel deploy\" /></p>\n<p>å¦‚æœä½¿ç”¨è©²æ–¹å¼ï¼Œåœ¨ Vercel å‡ºç¾ä¸‹é¢éŒ¯èª¤è¨Šæ¯ï¼Œæ”¹ç”¨é€™å€‹ <a href=\"https://vercel.com/new/austin-lees-projects/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample\">[Deploy]</a> è©¦è©¦</p>\n<div class=\"note danger\">\n<p>Error: No Output Directory named &quot;dist&quot; found after the Build completed. You can configure the Output Directory in your  Project Settings.</p>\n</div>\n<div class=\"note info\">\n<p>é™¤äº† Vercel ä½œç‚º Waline æœå‹™ä¹‹å¤–ï¼Œä¹Ÿæœ‰å…¶ä»–é¸æ“‡ <a href=\"https://waline.js.org/guide/get-started/server.html\">https://waline.js.org/guide/get-started/server.html</a></p>\n</div>\n<h1 id=\"å»ºç«‹-waline-ä½¿ç”¨çš„è³‡æ–™åº«\"><a class=\"anchor\" href=\"#å»ºç«‹-waline-ä½¿ç”¨çš„è³‡æ–™åº«\">#</a> å»ºç«‹ Waline ä½¿ç”¨çš„è³‡æ–™åº«</h1>\n<p>Waline éœ€è¦è³‡æ–™åº«å„²å­˜ç•™è¨€è³‡æ–™ï¼ŒWaline æ”¯æ´å¤šç¨®è³‡æ–™åº« <a href=\"https://waline.js.org/guide/database.html\">https://waline.js.org/guide/database.html</a> ã€‚<br />\nVercel ä¹Ÿæœ‰æä¾›è³‡æ–™åº«ï¼Œæ‰€ä»¥é€™é‚Šä½¿ç”¨ Vercel å…§å»ºçš„è³‡æ–™åº«æœå‹™ï¼Œå»ºç«‹ PostgreSQLã€‚</p>\n<p><img loading=\"lazy\" src=\"vercel-create-database.png\" alt=\"Create Database Step1\" /></p>\n<p><img loading=\"lazy\" src=\"vercel-create-postgres.png\" alt=\"Create Database Step2\" /></p>\n<div class=\"note info\">\n<p>éœ€è¦çš„è³‡æ–™è¡¨è«‹åƒè€ƒ<br />\n<a href=\"https://github.com/walinejs/waline/blob/main/assets/waline.pgsql\">https://github.com/walinejs/waline/blob/main/assets/waline.pgsql</a></p>\n</div>\n<h1 id=\"å°‡-waline-æœå‹™èˆ‡è³‡æ–™åº«é€£æ¥\"><a class=\"anchor\" href=\"#å°‡-waline-æœå‹™èˆ‡è³‡æ–™åº«é€£æ¥\">#</a> å°‡ Waline æœå‹™èˆ‡è³‡æ–™åº«é€£æ¥</h1>\n<p>é€²å…¥ App<br />\n<img loading=\"lazy\" src=\"enter-waline-app.png\" alt=\"Enter Waline App\" /><br />\né€£æ¥å‰›å‰›å»ºç«‹çš„ PostgreSQL<br />\n<img loading=\"lazy\" src=\"database-connect.png\" alt=\"Database connect\" /></p>\n<h1 id=\"è¨­å®š-waline-ç’°å¢ƒè®Šæ•¸\"><a class=\"anchor\" href=\"#è¨­å®š-waline-ç’°å¢ƒè®Šæ•¸\">#</a> è¨­å®š Waline ç’°å¢ƒè®Šæ•¸</h1>\n<p><img loading=\"lazy\" src=\"setting-environment-variable.png\" alt=\"Setting environment variable\" /></p>\n<p>å¦‚æœè³‡æ–™åº«é€£æ¥æˆåŠŸï¼Œæœƒçœ‹åˆ°ç´…æ¡†å…§çš„ç’°å¢ƒè®Šæ•¸ã€‚<br />\n<img loading=\"lazy\" src=\"waline-environment-variable.png\" alt=\"Connected Success Variable\" /></p>\n<p>ä½†é€™æ¨£é‚„ç„¡æ³•è®“ Waline server æˆåŠŸé€£æ¥è³‡æ–™åº«ï¼Œé‚„éœ€è¦è¨­å®šä¸‹é¢çš„ç’°å¢ƒè®Šæ•¸</p>\n<ul>\n<li>PG_SSL\n<ul>\n<li>è¨­ç‚º true</li>\n</ul>\n</li>\n<li>PG_PORT\n<ul>\n<li>è¨­ç‚º 5432</li>\n</ul>\n</li>\n</ul>\n<div class=\"note info\">\n<p>Waline å¯è¨­å®šçš„ PostgreSQL ç’°å¢ƒè®Šæ•¸<br />\n<a href=\"https://waline.js.org/guide/database.html#postgresql\">https://waline.js.org/guide/database.html#postgresql</a></p>\n</div>\n<h1 id=\"æ¸¬è©¦-waline-åŠŸèƒ½\"><a class=\"anchor\" href=\"#æ¸¬è©¦-waline-åŠŸèƒ½\">#</a> æ¸¬è©¦ Waline åŠŸèƒ½</h1>\n<p>é€²å…¥ Waline project æŸ¥çœ‹ Waline ç•™è¨€é é¢ã€‚</p>\n<p><img loading=\"lazy\" src=\"app-visit-test.png\" alt=\"Visit Waline app\" /></p>\n<p>å¦‚æœæ­£å¸¸çš„è©±æœƒçœ‹åˆ°å¦‚ä¸‹ç•«é¢ï¼Œå¯ä»¥ç•™è¨€æ¸¬è©¦çœ‹çœ‹æ˜¯å¦æˆåŠŸã€‚</p>\n<p><img loading=\"lazy\" src=\"waline-comment-page.png\" alt=\"Waline comment page\" /></p>\n<h1 id=\"è¨­å®š-shokax\"><a class=\"anchor\" href=\"#è¨­å®š-shokax\">#</a> è¨­å®š ShokaX</h1>\n<p>ä¿®æ”¹ Hexo ShokaX è¨­å®šæª”ï¼›Hexo è³‡æ–™å¤¾ <code>/_config.shokax.yml</code> æˆ– <code>/_config.shokaX.yml</code></p>\n<p>å¢åŠ ä¸‹é¢è¨­å®š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">waline</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  enable</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> true</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # å•Ÿç”¨ç‹€æ…‹</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  serverURL</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">https://waline-three-wine.vercel.app</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # Waline server ç¶²å€ï¼Œå¾ Vercel Project æŸ¥çœ‹ domain</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  lang</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">zh-TW</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # comment ç•Œé¢èªè¨€</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  meta</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # comment å¯å¡«å¯«é …ç›®</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nick</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mail</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  requiredMeta</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # comment å¿…å¡«é …ç›®</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nick</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mail</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  wordLimit</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 400</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # comment å­—æ•¸ä¸Šé™</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  pageSize</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # æ¯é é¡¯ç¤ºç­†æ•¸</span></span></code></pre>\n<div class=\"note info\">\n<p>Hexo ShokaX çš„ Waline å…¶ä»–è¨­å®šé …ç›®<br />\n<a href=\"https://docs.kaitaku.xyz/guide/comment.html#valine-%E7%B3%BB%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F\">https://docs.kaitaku.xyz/guide/comment.html#valine-ç³»è¯„è®ºç³»ç»Ÿ</a></p>\n</div>\n<h1 id=\"ä½¿ç”¨ç´€éŒ„\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç´€éŒ„\">#</a> ä½¿ç”¨ç´€éŒ„</h1>\n<h2 id=\"202406\"><a class=\"anchor\" href=\"#202406\">#</a> 2024/06</h2>\n<ul>\n<li>meta è¨­å®šç„¡æ•ˆï¼Œåªè¨­å®š nick, mail ä½†æ˜¯ç•Œé¢ä¸Šé‚„æ˜¯æœƒé¡¯ç¤ºç¶²å€æ¬„ä½</li>\n<li><code>æœ€æ–°è©•è«–</code> é¡¯ç¤º emoji ç„¡æ•ˆï¼Œæœƒè®Šæˆ HTML</li>\n</ul>\n",
            "tags": [
                "Step By Step",
                "Hexo theme",
                "Waline"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/10/30/spawn-node-gyp-ENOENT/",
            "url": "https://8loser.github.io/2023/10/30/spawn-node-gyp-ENOENT/",
            "title": "spawn node-gyp ENOENT",
            "date_published": "2023-10-29T17:04:26.000Z",
            "content_html": "<h1 id=\"å•é¡Œæè¿°\"><a class=\"anchor\" href=\"#å•é¡Œæè¿°\">#</a> å•é¡Œæè¿°</h1>\n<p>è¦æŠŠ theme è½‰ç‚º <a href=\"https://docs.kaitaku.xyz/\">shokaX</a> æ™‚ï¼ŒåŸ·è¡Œ <code>SXC install shokaX</code> å‡ºç¾éŒ¯èª¤è¨Šæ¯</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">error</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /workspaces/page/node_modules/deasync:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Command</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> failed.</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Exit</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> code:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Command:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> node</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./build.js</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Arguments:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Directory:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /workspaces/page/node_modules/deasync</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Output:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">node:events:495</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">      throw</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> er</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> //</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Unhandled</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">error</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> event</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">      ^</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Error:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> spawn</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> node-gyp</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ENOENT</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ChildProcess._handle.onexit</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/child_process:284:19</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> onErrorNT</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/child_process:477:16</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> process.processTicksAndRejections</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/process/task_queues:82:21</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Emitted</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">error</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> event</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ChildProcess</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> instance</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> at:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ChildProcess._handle.onexit</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/child_process:290:12</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> onErrorNT</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/child_process:477:16</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    at</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> process.processTicksAndRejections</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">node:internal/process/task_queues:82:21</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  errno:</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -2,</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  code:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ENOENT</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  syscall:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">spawn node-gyp</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  path:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">node-gyp</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  spawnargs:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">rebuild</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ]</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Node.js</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v18.18.2</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">info</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Visit</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://yarnpkg.com/en/docs/cli/add</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> documentation</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> about</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> this</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> command.</span></span></code></pre>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<ul>\n<li>Docker image: node:18-slim</li>\n</ul>\n<h1 id=\"ä¿®æ­£æ–¹æ³•\"><a class=\"anchor\" href=\"#ä¿®æ­£æ–¹æ³•\">#</a> ä¿®æ­£æ–¹æ³•</h1>\n<p>å®‰è£ä¸‹é¢å¥—ä»¶ï¼Œä¸ç¢ºå®š <code>make</code>, <code>g++</code> éœ€ä¸éœ€è¦ï¼Œå› ç‚ºä¹‹å‰é‡éé¡ä¼¼çš„å•é¡Œéƒ½è£é€™ä¸‰å€‹ï¼Œæ‰€ä»¥ç›´æ¥è¤‡è£½éä¾†ç”¨ã€‚å¦‚æœæ²’æœ‰å®‰è£çš„è©±ï¼Œåœ¨å®‰è£ <code>node-gyp</code> æœƒå‡ºç¾å…¶ä»–éŒ¯èª¤ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> python3</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> g++</span></span></code></pre>\n<p>å®‰è£ <code>node-gyp</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pnpm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> node-gyp</span></span></code></pre>\n",
            "tags": [
                "Trouble",
                "Docker",
                "Hexo",
                "Shoka",
                "Node.js"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/08/27/static-web-page-refresh-404/",
            "url": "https://8loser.github.io/2023/08/27/static-web-page-refresh-404/",
            "title": "éœæ…‹ç¶²é  refresh å‡ºç¾ 404",
            "date_published": "2023-08-26T16:40:55.000Z",
            "content_html": "<h1 id=\"trouble\"><a class=\"anchor\" href=\"#trouble\">#</a> Trouble</h1>\n<p>Vue é–‹ç™¼ç¶²é æ‰“åŒ…æˆéœæ…‹ç¶²é æª”æ¡ˆï¼Œä½¿ç”¨ docker compose çµåˆ nginx ä½ˆç½²ï¼Œç¶²é åˆ‡æ›åˆ°æœ‰è·¯å¾‘çš„é é¢å¾ŒæŒ‰ F5 é‡æ–°æ•´ç†é é¢æœƒå‡ºç¾ 404éŒ¯èª¤ ã€‚</p>\n<p>éœæ…‹é é¢æ‰“åŒ…å¾Œæœ‰å†ç”¨ <a href=\"https://acme.com/software/thttpd/\">thttpd</a> ä½œç‚º web æœå‹™ä¸¦æ‰“åŒ…æˆ container æ–¹ä¾¿ä½ˆç½²ï¼Œå¯¦éš›éŒ¯èª¤æƒ…æ³å¦‚ä¸‹åœ–ï¼Œå¦‚æœä¸åŒçš„ web æœå‹™æœƒæœ‰ä¸åŒç•«é¢ã€‚</p>\n<p><img loading=\"lazy\" src=\"404-not-found.png\" alt=\"404 Not Found\" /></p>\n<h1 id=\"docker-composeyml\"><a class=\"anchor\" href=\"#docker-composeyml\">#</a> Docker-compose.yml</h1>\n<p>æœ‰ä¿®æ”¹éçš„å…§å®¹ï¼Œå¯¦éš›ä¸åªæœ‰å…©å€‹ container</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-dockerfile\"><span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">services:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  nginx:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    image: nginx</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    restart: unless-stopped</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    volumes:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # nginx è¨­å®šæª”</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      - ./nginx.conf:/etc/nginx/conf.d/default.conf</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      - ./robots.txt.test:/usr/share/nginx/html/robots.txt</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    environment:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      TZ: Asia/Taipei</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    ports:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      - target: 80</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        published: 80</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        protocol: tcp</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        mode: host</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å‰ç«¯ web service</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  branded:</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    image: ***é¦¬è³½å…‹***</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    restart: unless-stopped</span></span></code></pre>\n<h1 id=\"nginxconf\"><a class=\"anchor\" href=\"#nginxconf\">#</a> Nginx.conf</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  listen </span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">80</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  server_name </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # LB Public IP address</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">***é¦¬è³½å…‹***</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">130.211.0.0/22</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  set_real_ip_from </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">35.191.0.0/16</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  real_ip_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  real_ip_recursive on</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # é˜»æ“‹çš„ User Agent</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">http_user_agent</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ~* </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">***ä¸è¦å‘Šè¨´æ³¥*** </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 101</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> /robots.txt </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    alias </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">/usr/share/nginx/html/robots.txt</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> /healthcheck </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    access_log off</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 200</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 'ok'</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å‰ç«¯</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_pass </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">http://branded/</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Host </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">host</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Real-IP </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">remote_addr</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">proxy_add_x_forwarded_for</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Custom-Referrer smc_identity_layer</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h1 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h1>\n<p>åœ¨ nginx.conf åŠ ä¸Š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>proxy_intercept_errors on;</span></span>\n<span class=\"line\"><span>error_page 404 /index.html;</span></span></code></pre>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # å‰ç«¯</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">  location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_pass </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">http://branded/</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Host </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">host</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Real-IP </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">remote_addr</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">proxy_add_x_forwarded_for</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Custom-Referrer smc_identity_layer</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # é«˜æƒ…å•†(?)åŠ ä¸‹é¢é€™å…©è¡Œ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_intercept_errors on</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> /index.html</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Trouble",
                "Deploy",
                "Nginx",
                "static web page",
                "Docker Compose"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/07/14/fixing-mixed-content/",
            "url": "https://8loser.github.io/2023/07/14/fixing-mixed-content/",
            "title": "ç€è¦½å™¨å‡ºç¾ Mixed Content è¨Šæ¯",
            "date_published": "2023-07-14T11:25:05.000Z",
            "content_html": "<p>Chrome Console å‡ºç¾ <code>Mixed Content</code> è¨Šæ¯</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>Mixed Content: The page at 'https://www.***.com/' was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint 'http://192.168.10.200:3000/'. </span></span>\n<span class=\"line\"><span>This request has been blocked; the content must be served over HTTPS.</span></span></code></pre>\n<p>å‡ºç¾è©²è¨Šæ¯æ˜¯å› ç‚ºåœ¨ https é é¢å…§ï¼Œå‘¼å« http å”å®šçš„ APIï¼ŒåŸºæ–¼å®‰å…¨å•é¡Œï¼Œç€è¦½å™¨æœƒå°é–è©²è«‹æ±‚ã€‚è§£æ±ºæ–¹å¼æ˜¯æŠŠ API æ›æˆ https å³å¯ï¼Œä½†é€™å€‹ API æ˜¯æˆ‘å€‘æ”¾åœ¨å®¢æˆ¶ç«¯å­˜å–å®¢æˆ¶å…§éƒ¨ç¶²è·¯çš„ serviceï¼Œè®“å®¢æˆ¶åœ¨æˆ‘å€‘ç¶²ç«™é€éå‘¼å«è©² service å­˜å–ä»–å€‘å…§ç¶²è³‡æ–™ã€‚</p>\n<p>å¦‚æœè¦ç‚ºäº†é€™å€‹ service å»ºç«‹åŸŸåã€ç”³è«‹ SSL æ†‘è­‰æœ‰é»éº»ç…©ï¼ˆæˆ‘å°±æ‡¶ï¼‰ï¼Œæ‰€ä»¥è«‹å®¢æˆ¶èª¿æ•´ç€è¦½å™¨è¨­å®šï¼Œå…è¨±ä¸å®‰å…¨å…§å®¹ã€‚</p>\n<p><img loading=\"lazy\" src=\"allow-insecure-content.png\" alt=\"Allow insecure conten\" /></p>\n<h1 id=\"ç›¸é—œåƒè€ƒ\"><a class=\"anchor\" href=\"#ç›¸é—œåƒè€ƒ\">#</a> ç›¸é—œåƒè€ƒ</h1>\n<ul>\n<li>\n<p><a href=\"https://support.google.com/chrome/answer/114662?hl=zh-Hant&amp;co=GENIE.Platform%3DDesktop#zippy=%2C%E7%9E%AD%E8%A7%A3%E5%8F%AF%E8%AE%8A%E6%9B%B4%E7%9A%84%E6%AC%8A%E9%99%90\">è®Šæ›´ç¶²ç«™è¨­å®šæ¬Šé™</a></p>\n</li>\n<li>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content\">æ··åˆå…§å®¹</a></p>\n</li>\n</ul>\n",
            "tags": [
                "Trouble",
                "Mixed Content",
                "Browser"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/05/28/yay-is-corrupted/",
            "url": "https://8loser.github.io/2023/05/28/yay-is-corrupted/",
            "title": "yay æ›´æ–°é¡¯ç¤ºæª”æ¡ˆæ¯€æ",
            "date_published": "2023-05-28T10:03:54.000Z",
            "content_html": "<h1 id=\"å•é¡Œæè¿°\"><a class=\"anchor\" href=\"#å•é¡Œæè¿°\">#</a> å•é¡Œæè¿°</h1>\n<p>EndeavourOS æ›´æ–°æ™‚å‡ºç¾éŒ¯èª¤è¨Šæ¯ï¼Œä¸”æ¯æ¬¡æ›´æ–°æ™‚éƒ½å‡ºç¾ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> é€²è¡Œå®‰è£å—ï¼Ÿ</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Y/n</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> æ­£åœ¨æ¥æ”¶è»Ÿé«”åŒ…â€¦</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\"> libusbmuxd-2.0.2-3-x86_64</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">            31.8</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KiB</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   529</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KiB/s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 00:00</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\"> libplist-2.3.0-2-x86_64</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">             140.7</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KiB</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  1315</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KiB/s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 00:00</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\"> libimobiledevice-1.3.0-9-x86_64</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">     481.5</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KiB</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  2.35</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MiB/s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 00:00</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\"> yay-12.0.5-1-x86_64</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">                   3.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MiB</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  2.69</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MiB/s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 00:01</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\"> ç¸½å…±</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">4/4</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                            3.7 MiB  3.23 MiB/s 00:01 </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">78/78</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> æ­£åœ¨æª¢æŸ¥é‘°åŒ™åœˆä¸­çš„é‘°åŒ™</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                   </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">78/78</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> æ­£åœ¨æª¢æŸ¥è»Ÿé«”åŒ…å®Œæ•´æ€§</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                     </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">------------------------------------</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">éŒ¯èª¤ï¼šyayï¼šä¾†è‡ª</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> manuel</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">manuel@endeavouros.co</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">m</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> çš„ç°½ç« ä¿¡ä»»ç­‰ç´šä¸æ˜::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /var/cache/pacman/pkg/yay-12.0.5-1-x86_64.pkg.tar.zst</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> æª”æ¡ˆæ¯€æ</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">å¥—ä»¶ä¸æ­£ç¢ºæˆ–ææ¯€ï¼ˆPGP</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ç°½ç« ï¼‰</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ã€‚ä½ è¦åˆªé™¤å®ƒå—?</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Y/n</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">éŒ¯èª¤ï¼šç„¡æ³•æäº¤è™•ç†</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">å¥—ä»¶ä¸æ­£ç¢ºæˆ–ææ¯€ï¼ˆPGP </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ç°½ç« ï¼‰</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ç™¼ç”ŸéŒ¯èª¤ï¼Œæ²’æœ‰è»Ÿé«”åŒ…è¢«æ›´æ–°ã€‚</span></span></code></pre>\n<h1 id=\"ä¿®æ­£\"><a class=\"anchor\" href=\"#ä¿®æ­£\">#</a> ä¿®æ­£</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -Sy</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> archlinux-keyring</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> endeavouros-keyring</span></span></code></pre>\n<p>ä¿®æ­£å¾ŒåŸ·è¡Œ <code>yay -Syu</code> å¯æ­£å¸¸æ›´æ–°äº†ã€‚</p>\n",
            "tags": [
                "Trouble",
                "EndeavourOS",
                "Linux"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/05/06/dbeaver-backup-start-unavailable/",
            "url": "https://8loser.github.io/2023/05/06/dbeaver-backup-start-unavailable/",
            "title": "DBeaver backup start æŒ‰éˆ•æ²’æœ‰ä½œç”¨",
            "date_published": "2023-05-06T14:57:59.000Z",
            "content_html": "<h1 id=\"å•é¡Œæè¿°\"><a class=\"anchor\" href=\"#å•é¡Œæè¿°\">#</a> å•é¡Œæè¿°</h1>\n<p>åœ¨ Linux å…§ DBeaver backup <code>Start</code> æŒ‰éˆ•ç„¡æ³•é»é¸ï¼Œä¹Ÿç„¡æ³• <code>Next</code></p>\n<p><img loading=\"lazy\" src=\"start-unavailable.png\" alt=\"start unavailable\" /></p>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<ul>\n<li>OS: EndeavourOS, BUILD_ID=2023.03.06</li>\n<li>DBeaver\tCommunity 23.0.3</li>\n<li>Database: é›²ç«¯ PostgreSQL</li>\n</ul>\n<h1 id=\"ä¿®æ­£æ–¹æ³•\"><a class=\"anchor\" href=\"#ä¿®æ­£æ–¹æ³•\">#</a> ä¿®æ­£æ–¹æ³•</h1>\n<h2 id=\"å®‰è£-postgresql\"><a class=\"anchor\" href=\"#å®‰è£-postgresql\">#</a> å®‰è£ PostgreSQL</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> postgresql</span></span></code></pre>\n<h2 id=\"æŸ¥çœ‹-pg_dump-ä½ç½®\"><a class=\"anchor\" href=\"#æŸ¥çœ‹-pg_dump-ä½ç½®\">#</a> æŸ¥çœ‹ pg_dump ä½ç½®</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> whereis</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pg_dump</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pg_dump:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/pg_dump</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /usr/share/man/man1/pg_dump.1.gz</span></span></code></pre>\n<p>çŸ¥é“ <code>pg_dump</code> ç¨‹å¼ä½ç½®åœ¨ <code>/usr/bin/</code></p>\n<h2 id=\"dbeaver-è¨­å®š-driver\"><a class=\"anchor\" href=\"#dbeaver-è¨­å®š-driver\">#</a> DBeaver è¨­å®š Driver</h2>\n<p>å¾ DBeaver é¸å–®é–‹å•Ÿ Database/Driver Managerï¼Œé»é¸ PostgreSQL æŒ‰ <code>Edit</code><br />\n<img loading=\"lazy\" src=\"driver-manager.png\" alt=\"Driver Manager\" /></p>\n<p>é¸å– <code>Native Client</code>/<code>Add Home</code></p>\n<p><img loading=\"lazy\" src=\"native-client.png\" alt=\"Native Client\" /></p>\n<p>è¨­å®š Home ç‚º <code>/usr/bin/</code></p>\n<p><img loading=\"lazy\" src=\"add-home.png\" alt=\"Add Home\" /></p>\n<h1 id=\"æ¸¬è©¦\"><a class=\"anchor\" href=\"#æ¸¬è©¦\">#</a> æ¸¬è©¦</h1>\n<p><code>Next</code> å¯ä»¥é»é¸äº†<br />\n<img loading=\"lazy\" src=\"backup-next.png\" alt=\"Backup Next\" /></p>\n<p>é»é¸ <code>Next</code> å¾Œï¼Œé¸å–å‚™ä»½è·¯å¾‘æŒ‰ <code>Start</code> å°±å¯ä»¥å‚™ä»½äº†<br />\n<img loading=\"lazy\" src=\"backup-start.png\" alt=\"Backup Start\" /></p>\n",
            "tags": [
                "Trouble",
                "Linux",
                "DBeaver"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/03/12/reduce-frontend-docker-image/",
            "url": "https://8loser.github.io/2023/03/12/reduce-frontend-docker-image/",
            "title": "ç¸®æ¸›éœæ…‹ç¶²é  Docker image å¤§å°",
            "date_published": "2023-03-12T13:59:19.000Z",
            "content_html": "<h1 id=\"å‰è¨€\"><a class=\"anchor\" href=\"#å‰è¨€\">#</a> å‰è¨€</h1>\n<p>é€šå¸¸ Vue éƒ¨å±¬éƒ½æ˜¯å…ˆæ‰“åŒ…æˆéœæ…‹ç¶²é å†éƒ¨å±¬åˆ° web æœå‹™å™¨ä¸Šï¼Œä½†å¦‚æ­¤ç„¡æ³•åšåˆ°ç¨‹å¼ç¢¼ä¸Šå‚³ç‰ˆæ§å¾Œè‡ªå‹•éƒ¨ç½²ï¼Œå› ç‚ºä¸Šå‚³çš„æ˜¯åŸå§‹ç¢¼ï¼Œä¸æ˜¯æ‰“åŒ…å¾Œçš„éœæ…‹ç¶²é ã€‚</p>\n<p>æ‰€ä»¥ Vue æ­é… Docker æ™‚ï¼Œæœ‰ç¨®ä½œæ³•æ˜¯æŠŠåŸå§‹ç¢¼ç›´æ¥ç›´æ¥ build æˆåŸ·è¡Œ <code>npm run dev</code> çš„ docker image å¾Œæ”¾åœ¨ server åŸ·è¡Œã€‚</p>\n<p><img loading=\"lazy\" src=\"jsut-do-it.jpg\" alt=\"\" /></p>\n<div class=\"note danger\">\n<p>é€™ç¨®ä½œæ³•ç”¢ç”Ÿçš„ docker image å¾ˆå¤§ï¼Œæ‰è²»é‚„ç”¨ Vue</p>\n</div>\n<h1 id=\"ç¸®æ¸›æ–¹å¼\"><a class=\"anchor\" href=\"#ç¸®æ¸›æ–¹å¼\">#</a> ç¸®æ¸›æ–¹å¼</h1>\n<p>ä½¿ç”¨ <a href=\"https://docs.docker.com/build/building/multi-stage/\">Multi-stage builds</a>ï¼Œåœ¨ç¬¬ä¸€å€‹ stage build å‡ºéœæ…‹ç¶²é ï¼Œè¤‡è£½åˆ°ç¬¬äºŒå€‹ stage è·Ÿ web service æ‰“åŒ…æˆ imageã€‚</p>\n<p>å‡è¨­åŸæœ¬ Dockerfiler å¦‚ä¸‹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-dockerfile\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">FROM</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> node:18-slim</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">COPY</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> . .</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">RUN</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> npm install --production=false</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">EXPOSE</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 5173</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">CMD</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"npm\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"run\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"dev\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span></code></pre>\n<p>åŠ ä¸Šç¬¬äºŒå€‹ stageï¼Œä¸¦ä¸”ä½¿ç”¨ <a href=\"https://acme.com/software/thttpd/\">thttpd</a> ä½œç‚ºéœæ…‹ç¶²é çš„ web service</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-dockerfile\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¬¬ä¸€å€‹ stage</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">FROM</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> node:18-slim </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">AS</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> builder</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">COPY</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> . .</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">RUN</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> npm install --production=false</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># build static html æª”æ¡ˆï¼Œæª”æ¡ˆæœƒç”¢ç”Ÿåœ¨ /dist å…§</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">RUN</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> npm run build</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¬¬äºŒå€‹ stage</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">FROM</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> alpine</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å®‰è£ thttpd</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">RUN</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> apk update &#x26;&#x26; apk upgrade &#x26;&#x26; apk add --no-cache thttpd</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¤‡è£½ç¬¬ä¸€å€‹ stage ç”¢ç”Ÿçš„ static html åˆ° /front</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">COPY</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> --from=builder /dist /front</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">EXPOSE</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 5173</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># container å•Ÿå‹•æ™‚åŸ·è¡Œ thttpd</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">CMD</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"thttpd\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-D\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-h\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"0.0.0.0\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-p\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"5173\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-d\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"/front\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-l\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"-M\"</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"60\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span></code></pre>\n<p><img loading=\"lazy\" src=\"finish.gif\" alt=\"\" /></p>\n<h1 id=\"æ¯”è¼ƒ\"><a class=\"anchor\" href=\"#æ¯”è¼ƒ\">#</a> æ¯”è¼ƒ</h1>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">Docker image å¤§å°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">ä¿®æ”¹å‰</td>\n<td style=\"text-align:center\">504MB</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ä¿®æ”¹å¾Œ</td>\n<td style=\"text-align:center\">11.1MB</td>\n</tr>\n</tbody>\n</table>\n<p><img loading=\"lazy\" src=\"whoa.gif\" alt=\"\" /></p>\n",
            "tags": [
                "Docker"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/03/11/EndeavourOS-init/",
            "url": "https://8loser.github.io/2023/03/11/EndeavourOS-init/",
            "title": "EndeavourOS å¸¸ç”¨ç¨‹å¼å®‰è£",
            "date_published": "2023-03-11T13:23:40.000Z",
            "content_html": "<h1 id=\"åƒæ•¸èªªæ˜\"><a class=\"anchor\" href=\"#åƒæ•¸èªªæ˜\">#</a> åƒæ•¸èªªæ˜</h1>\n<ul>\n<li><code>--noconfirm</code> è‡ªå‹•ç¢ºèª</li>\n<li><code>--needed</code> å·²å®‰è£çš„å¥—ä»¶ä¸é‡è¤‡å®‰è£</li>\n</ul>\n<h1 id=\"æ³¨éŸ³è¼¸å…¥æ³•-æ–°é…·éŸ³\"><a class=\"anchor\" href=\"#æ³¨éŸ³è¼¸å…¥æ³•-æ–°é…·éŸ³\">#</a> æ³¨éŸ³è¼¸å…¥æ³• (æ–°é…·éŸ³)</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fcitx5</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fcitx5-im</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fcitx5-chinese-addons</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fcitx5-configtool</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fcitx5-chewing</span></span></code></pre>\n<p>ä¿®æ”¹ <code>/etc/environment</code> æª”æ¡ˆï¼Œå¢åŠ ä¸‹é¢è¨­å®š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">GTK_IM_MODULE</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fcitx</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">QT_IM_MODULE</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fcitx</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">XMODIFIERS</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">@</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">im</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fcitx</span></span></code></pre>\n<h1 id=\"è—èŠ½\"><a class=\"anchor\" href=\"#è—èŠ½\">#</a> è—èŠ½</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bluez</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bluez-utils</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> blueberry</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿç”¨</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> enable</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bluetooth</span></span></code></pre>\n<h1 id=\"visual-studio-code\"><a class=\"anchor\" href=\"#visual-studio-code\">#</a> Visual Studio Code</h1>\n<p>å®‰è£ AUR çš„ bin ç‰ˆæœ¬æ‰æœ‰ Remote Development å¥—ä»¶</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">yay</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span></span></code></pre>\n<h1 id=\"docker\"><a class=\"anchor\" href=\"#docker\">#</a> Docker</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker</span></span></code></pre>\n<h1 id=\"docker-desktop\"><a class=\"anchor\" href=\"#docker-desktop\">#</a> Docker Desktop</h1>\n<p>è¦å…ˆä¸‹è¼‰å®‰è£æª”æ¡ˆ</p>\n<div class=\"note info\">\n<p>ä¸‹è¼‰ç‰ˆæœ¬, å¯åƒè€ƒ <a href=\"https://docs.docker.com/desktop/release-notes/\">https://docs.docker.com/desktop/release-notes/</a></p>\n</div>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä¸‹è¼‰å¥—ä»¶æª”æ¡ˆ</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">dockerDesktopFile</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">docker-desktop-4.17.0-x86_64.pkg.tar.zst</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">wget</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://desktop.docker.com/linux/main/amd64/</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">$dockerDesktopFile</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -P</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /tmp</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å®‰è£å¥—ä»¶</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -U</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /tmp/</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">$dockerDesktopFile</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç§»é™¤ä¸‹è¼‰çš„æª”æ¡ˆ</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /tmp/</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">$dockerDesktopFile</span></span></code></pre>\n<div class=\"note info\">\n<p>æ‰‹å‹•å®‰è£å¯åƒè€ƒ <a href=\"https://docs.docker.com/desktop/install/archlinux/\">https://docs.docker.com/desktop/install/archlinux/</a></p>\n</div>\n<h1 id=\"google-chrome\"><a class=\"anchor\" href=\"#google-chrome\">#</a> Google Chrome</h1>\n<p>AUR æ‰æœ‰</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">yay</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --noconfirm</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> google-chrome</span></span></code></pre>\n<h1 id=\"è¨­å®š-ram-disk\"><a class=\"anchor\" href=\"#è¨­å®š-ram-disk\">#</a> è¨­å®š RAM disk</h1>\n<p>å»ºç«‹æª”æ¡ˆ <code>/etc/tmpfiles.d/shmFolder.conf</code><br />\nä½¿ç”¨è€…åç¨±çš„ä½ç½®è¨˜å¾—ä¿®æ”¹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä¸‹è¼‰è³‡æ–™å¤¾</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">d</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/shm/Downloads</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0755</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">L+</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /home/</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/Downloads</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/shm/Downloads</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># Chrome æš«å­˜è³‡æ–™å¤¾</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">d</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/shm/ChromeCache</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0700</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">L+</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /home/</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ä½¿ç”¨è€…å</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¨±</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/.cache/google-chrome</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/shm/ChromeCache</span></span></code></pre>\n<p>åŸ·è¡Œä½¿è¨­å®šæª”ç”Ÿæ•ˆï¼Œæˆ–è€…é‡æ–°é–‹æ©Ÿ</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">systemd-tmpfiles</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --create</span></span></code></pre>\n<h1 id=\"å®Œæ•´-shell-script\"><a class=\"anchor\" href=\"#å®Œæ•´-shell-script\">#</a> å®Œæ•´ Shell Script</h1>\n<p>åœ¨é€™è£¡ <a href=\"https://gist.github.com/8loser/a99f0e946861db9a368693ab747c5506\">EndeavourOS-init.sh</a></p>\n",
            "tags": [
                "EndeavourOS",
                "Linux",
                "Shell script"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/02/23/linux-recovering-journal/",
            "url": "https://8loser.github.io/2023/02/23/linux-recovering-journal/",
            "title": "Linux é–‹æ©Ÿé¡¯ç¤º recovering journal",
            "date_published": "2023-02-23T08:51:28.000Z",
            "content_html": "<h1 id=\"æè¿°\"><a class=\"anchor\" href=\"#æè¿°\">#</a> æè¿°</h1>\n<p>Linux ä½œæ¥­ç³»çµ±é–‹æ©Ÿé¡¯ç¤º recovering journalï¼Œç„¡æ³•æ­£å¸¸é€²å…¥æ¡Œé¢ç’°å¢ƒã€‚<br />\nå®Œæ•´è¨Šæ¯å¦‚ä¸‹ï¼Œå‡ºç¾ <code>recovering journal</code> å¾Œï¼Œè¦ç­‰å€‹å¹¾åˆ†é˜æ‰æœƒå†å‡ºç¾å¾ŒçºŒçš„è¨Šæ¯ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">/dev/nvme0n1p5:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> recovering</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> journal</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">/dev/nvme0n1p5:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> clean,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1217915/16416000</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 17252131/65536000</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> blocks</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> TIME </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> Timed out waiting </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> device /dev/sda2.</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">DEPEND</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> Dependency failed </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> /home/user/test.</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">DEPEND</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> Dependency failed </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> Local File System.</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">You</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> are</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> in</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> emergency</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mode.</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> After</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> logging</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> in,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> type</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">journalctl -xb</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> view</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> system</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> logs,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">systemctl reboot</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> reboot,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">systemctl default</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> or</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">exit</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> boot</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> into</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mode.</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Give</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> password</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> maintenance</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">or</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> press</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Control-D</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> continue</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#998418;--shiki-dark:#B8A965\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">...</span></span></code></pre>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> lsb_release</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -a</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">LSB</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Version:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tn/a</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Distributor</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tManjaroLinux</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Description:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tManjaro</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Release:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">\t22.0.4</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Codename:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tSikaris</span></span></code></pre>\n<h1 id=\"ä¿®æ­£\"><a class=\"anchor\" href=\"#ä¿®æ­£\">#</a> ä¿®æ­£</h1>\n<p>ä½¿ç”¨ root æ¬Šé™ç·¨è¼¯ <code>/etc/fstab</code>ï¼ŒæŠŠ <code>/dev/sda2</code> (éŒ¯èª¤è¨Šæ¯ä¸­é¡¯ç¤ºçš„) é‚£è¡Œåˆªé™¤ï¼Œå„²å­˜ï¼Œrebootã€‚</p>\n<h1 id=\"åŸå› \"><a class=\"anchor\" href=\"#åŸå› \">#</a> åŸå› </h1>\n<p>æ‡‰è©²æ˜¯æˆ‘å‰ä¸€æ¬¡é—œæ©Ÿå‰ï¼Œæ’å¤–æ¥ç¡¬ç¢Ÿåˆç”¨ partition ç®¡ç†å·¥å…· mount å¤–æ¥ç¡¬ç¢Ÿ partition å°è‡´ã€‚</p>\n",
            "tags": [
                "Trouble",
                "Linux"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/02/20/terminals-pty-host-is-unresponsive/",
            "url": "https://8loser.github.io/2023/02/20/terminals-pty-host-is-unresponsive/",
            "title": "Dev Containers å‡ºç¾ terminal's pty host process is unresponsive",
            "date_published": "2023-02-20T06:10:40.000Z",
            "content_html": "<h1 id=\"éŒ¯èª¤è¨Šæ¯\"><a class=\"anchor\" href=\"#éŒ¯èª¤è¨Šæ¯\">#</a> éŒ¯èª¤è¨Šæ¯</h1>\n<div class=\"note success\">\n<p>Visual Studio Code 1.76.1 ç‰ˆæœ¬å·²ä¸æœƒæœ‰æ­¤å•é¡Œ</p>\n</div>\n<p>æ›´æ–° Visual Studio Code å¾Œï¼Œé€²å…¥ Dev Containers å‡ºç¾éŒ¯èª¤ <code>The connection to the terminal's pty host process is unresponsive</code>ï¼Œä¸” terminal ç„¡æ³•ä½¿ç”¨ã€‚<br />\n<img loading=\"lazy\" src=\"error-message.png\" alt=\"Error message\" /></p>\n<p>é»é¸ <code>Restart pty host</code> å¾Œ terminal ä»ç„¡æ³•æ­£å¸¸é¡¯ç¤º</p>\n<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<ul>\n<li>ä½œæ¥­ç³»çµ±</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> lsb_release</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">  -a</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">LSB</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Version:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tn/a</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Distributor</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tManjaroLinux</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Description:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tManjaro</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Release:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">\t22.0.4</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Codename:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\tSikaris</span></span></code></pre>\n<ul>\n<li>Visual Studio Code 1.75.1 (æœƒå‡ºç¾éŒ¯èª¤çš„ç‰ˆæœ¬)</li>\n</ul>\n<h1 id=\"å˜—è©¦ä¿®æ­£\"><a class=\"anchor\" href=\"#å˜—è©¦ä¿®æ­£\">#</a> å˜—è©¦ä¿®æ­£</h1>\n<p>Visual Studio Code è¨­å®š terminal.integrated.windowsEnableConpty: falseï¼Œé‡å•Ÿå¾Œç•°å¸¸ç‹€æ³ä¸€æ¨£ã€‚</p>\n<h1 id=\"ä½¿ç”¨-downgrade-é™ç‰ˆ\"><a class=\"anchor\" href=\"#ä½¿ç”¨-downgrade-é™ç‰ˆ\">#</a> ä½¿ç”¨ downgrade é™ç‰ˆ</h1>\n<p>ç„¡æ³•é™ç‰ˆï¼Œå¯èƒ½å› ç‚ºæˆ‘å…ˆæŠŠ VSCode åˆªé™¤å†é‡æ–°å®‰è£ï¼Œè€Œé‡æ–°å®‰è£æ˜¯æœ€æ–°ç‰ˆçš„ï¼Œæ‰€ä»¥é›»è…¦å…§æ²’æœ‰ä¿ç•™èˆŠç‰ˆæœ¬ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> downgrade</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Downgrading</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> from</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> A.L.A.</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> disabled</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> stable</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> branch.</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> To</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> override</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> this</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> behavior,</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> set</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> DOWNGRADE_FROM_ALA</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1.</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">See</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://wiki.manjaro.org/index.php/Downgrading_packages</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> more</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> details.</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">No</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> results</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> found</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Unable</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> downgrade</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span></span></code></pre>\n<h1 id=\"ç›´æ¥å®‰è£èˆŠç‰ˆæœ¬\"><a class=\"anchor\" href=\"#ç›´æ¥å®‰è£èˆŠç‰ˆæœ¬\">#</a> ç›´æ¥å®‰è£èˆŠç‰ˆæœ¬</h1>\n<h2 id=\"å–å¾—èˆŠç‰ˆæœ¬\"><a class=\"anchor\" href=\"#å–å¾—èˆŠç‰ˆæœ¬\">#</a> å–å¾—èˆŠç‰ˆæœ¬</h2>\n<p>å¾ <a href=\"https://aur.archlinux.org/packages/\">AUR repository</a>æ‰¾åˆ°ä½¿ç”¨çš„å¥—ä»¶<a href=\"https://aur.archlinux.org/packages/visual-studio-code-bin\">visual-studio-code-bin</a>ï¼Œé»é¸ <code>View Changes</code> æŸ¥çœ‹èˆŠç‰ˆæœ¬ã€‚</p>\n<p><img loading=\"lazy\" src=\"aur-package.png\" alt=\"AUR package\" /></p>\n<p>é¸æ“‡å¯ä»¥æ­£å¸¸çš„ç‰ˆæœ¬; 1.74.3ï¼Œä¸‹è¼‰å¥—ä»¶ã€‚</p>\n<p><img loading=\"lazy\" src=\"aur-package-changes.png\" alt=\"AUR package changes\" /><br />\n<img loading=\"lazy\" src=\"old-package-download.png\" alt=\"old package download\" /></p>\n<h2 id=\"å»ºç«‹-package\"><a class=\"anchor\" href=\"#å»ºç«‹-package\">#</a> å»ºç«‹ package</h2>\n<p>è§£å£“ç¸®å¾Œé€²å…¥</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -a1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">.</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">..</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">code.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">code-url-handler.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">PKGBUILD</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">.SRCINFO</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-bin.install</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-bin.sh</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-workspace.xml</span></span></code></pre>\n<p>å»ºç«‹ package</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> makepkg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -s</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Making</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1.74.3-1</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">å»¿å»¿ä¸‰å¹´äºŒæœˆå»¿æ—¥ </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">é€±ä¸€</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> å»¿æ™‚47åˆ†åä¸‰ç§’</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> runtime</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> dependencies...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> buildtime</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> dependencies...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Retrieving</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sources...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Found</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> code.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Found</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> code-url-handler.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Found</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-workspace.xml</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Found</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin.sh</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Downloading</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> code_x64_1.74.3.tar.gz...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  %</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Total</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    %</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Received</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> %</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Xferd</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Average</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Speed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   Time</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    Time</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Time</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Current</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                                 Dload</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Upload</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   Total</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   Spent</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    Left</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Speed</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">100</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   134</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  100</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   134</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">    0</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">     0</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">    159</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">      0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --:--:--</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --:--:--</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --:--:--</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   159</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">100</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  131M</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  100</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  131M</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">    0</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">     0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  3979k</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">      0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  0:00:33</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  0:00:33</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --:--:--</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 4091k</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Validating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> source</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> with</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sha256sums...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    code.desktop</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ...</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Passed</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    code-url-handler.desktop</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ...</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Passed</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    visual-studio-code-workspace.xml</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ...</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Passed</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    visual-studio-code-bin.sh</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ...</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Passed</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Validating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> source_x86_64</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> with</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sha256sums...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    code_x64_1.74.3.tar.gz</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ...</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Passed</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Extracting</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sources...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Extracting</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> code_x64_1.74.3.tar.gz</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> with</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bsdtar</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Entering</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fakeroot</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> environment...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Starting</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Tidying</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Removing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> libtool</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Purging</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unwanted</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Removing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> static</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> library</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Stripping</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unneeded</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> symbols</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> from</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> binaries</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> libraries...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Compressing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> man</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pages...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> packaging</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> issues...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Creating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">visual-studio-code-bin</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Generating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .PKGINFO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Generating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .BUILDINFO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Adding</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Generating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .MTREE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Compressing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package...</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Leaving</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fakeroot</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> environment.</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Finished</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> making:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1.74.3-1</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">å»¿å»¿ä¸‰å¹´äºŒæœˆå»¿æ—¥ </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">é€±ä¸€</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> å»¿æ™‚48åˆ†äºŒç§’</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<p>å»ºç«‹ package å¾Œæœƒç”¢ç”Ÿéœ€è¦çš„æª”æ¡ˆï¼Œæª¢æŸ¥æœ‰æ²’æœ‰ç”¢ç”Ÿ <code>visual-studio-code-bin-1.74.3-1-x86_64.pkg.tar.zst</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -a1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">.</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">..</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">code.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">code-url-handler.desktop</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">code_x64_1.74.3.tar.gz</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pkg</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">PKGBUILD</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">src</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">.SRCINFO</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-bin-1.74.3-1-x86_64.pkg.tar.zst</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-bin.install</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-bin.sh</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">visual-studio-code-workspace.xml</span></span>\n<span class=\"line\"></span></code></pre>\n<h2 id=\"å®‰è£\"><a class=\"anchor\" href=\"#å®‰è£\">#</a> å®‰è£</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pacman</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -U</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin-1.74.3-1-x86_64.pkg.tar.zst</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">loading</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> packages...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">resolving</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> dependencies...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">looking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conflicting</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> packages...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Packages</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> visual-studio-code-bin-1.74.3-1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Total</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Installed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Size:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  331.05</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MiB</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Proceed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> with</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> installation?</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Y/n</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> y</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> keys</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> in</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> keyring</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                   </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> integrity</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                 </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> loading</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                      </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conflicts</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                                </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> checking</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> available</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> disk</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> space</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                              </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Processing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> package</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> changes...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> installing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                          </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">####################################</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 100%</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">==</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">NOTE:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Custom</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> flags</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> should</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> be</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> put</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> directly</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> in:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ~/.config/code-flags.conf</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Optional</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> dependencies</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> visual-studio-code-bin</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    glib2:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> move</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> trash</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> functionality</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">installed</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    libdbusmenu-glib:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> KDE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> global</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> menu</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">installed</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    org.freedesktop.secrets:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> settings</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sync</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">installed</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    icu69:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Needed</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> live</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> share</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">::</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Running</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> post-transaction</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hooks...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">1/4</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> Arming</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ConditionNeedsUpdate...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">2/4</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> Updating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MIME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> type</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> database...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">3/4</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> Refreshing</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> PackageKit...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">4/4</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> Updating</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> desktop</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MIME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> type</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cache...</span></span></code></pre>\n<h1 id=\"æ³¨æ„äº‹é …\"><a class=\"anchor\" href=\"#æ³¨æ„äº‹é …\">#</a> æ³¨æ„äº‹é …</h1>\n<p>åœ¨ Linux ç’°å¢ƒè¦å®‰è£ <code>visual-studio-code-bin</code> çš„ç‰ˆæœ¬ï¼Œæ‰æœ‰ <code>Remote Development</code> å¥—ä»¶å¯ä»¥å®‰è£ã€‚</p>\n<p><img loading=\"lazy\" src=\"package-visual-studio-code-bin.png\" alt=\"Visual Studio Code bin\" /></p>\n<h1 id=\"åƒè€ƒè³‡æ–™\"><a class=\"anchor\" href=\"#åƒè€ƒè³‡æ–™\">#</a> åƒè€ƒè³‡æ–™</h1>\n<ul>\n<li><a href=\"https://github.com/microsoft/vscode-remote-release/issues/7999\">https://github.com/microsoft/vscode-remote-release/issues/7999</a></li>\n<li><a href=\"https://github.com/microsoft/vscode/issues/130320\">https://github.com/microsoft/vscode/issues/130320</a></li>\n</ul>\n",
            "tags": [
                "Trouble",
                "VSCode",
                "Remote Development"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/02/19/newbie-guide/",
            "url": "https://8loser.github.io/2023/02/19/newbie-guide/",
            "title": "æ–°æ‰‹æŒ‡å—",
            "date_published": "2023-02-19T07:04:11.000Z",
            "content_html": "<h1 id=\"æ–°æ‰‹æŒ‡å—\"><a class=\"anchor\" href=\"#æ–°æ‰‹æŒ‡å—\">#</a> æ–°æ‰‹æŒ‡å—</h1>\n<p>é€™æ˜¯ä¸€ç¯‡æ–°æ‰‹é€²å…¬å¸å¾Œæ•´ç†å…§éƒ¨é–‹ç™¼æµç¨‹çš„ <s>äº‹æ•…</s> æ•…äº‹</p>\n<h1 id=\"è¦æœ‰å…‰\"><a class=\"anchor\" href=\"#è¦æœ‰å…‰\">#</a> è¦æœ‰å…‰</h1>\n<p>ä¸Šç­ç¬¬ä¸€å¤©ï¼Œè¦ç·Šé ­ä¸€ä»¶äº‹å°±æ˜¯ <span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">èªæ¸…è‡ªå·±åœ¨é£Ÿç‰©éˆä¸­çš„ä½ç½®</span> ç†Ÿæ‚‰é–‹ç™¼ç’°å¢ƒï¼Œç›®å‰å…¬å¸é–‹ç™¼åˆ°ä½ˆç½²çš„æµç¨‹æ˜¯åŸå§‹ç¢¼åœ¨æ¯å€‹äººçš„ç’°å¢ƒéƒ½æœ‰ä¸€ä»½ï¼Œå¦‚æœæœ‰ä¿®æ”¹å†å‚³ä¿®æ”¹çš„æª”æ¡ˆçµ¦çŸ¥é“æ€éº¼ä½ˆç½²çš„äººå»ä½ˆç½²ï¼Œé€™æ–¹å¼æœ‰æ™‚å¾Œæœƒæ¼æ‰æª”æ¡ˆï¼Œä¹Ÿå¾ˆé›£ææ¸…å“ªå€‹æ‰æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ç¨‹å¼ã€‚è€Œä¸”æ¯å€‹äººé–‹ç™¼ç’°å¢ƒä¸åŒï¼Œå‰›æ‹¿åˆ°å°ˆæ¡ˆåŸå§‹ç¢¼æ™‚å•Ÿå‹•å¤±æ•—ï¼ŒåŒå­¸æœƒæ•™æˆ‘ä¸€äº›å¥‡è¨ˆæ·«å·§è‡³ä»Šä»¤æˆ‘åŒªå¤·æ‰€æ€çš„æ–¹æ³•ï¼ˆç‚ºä»€éº¼è¦ä¿®æ”¹ node_modules å…§çš„æª”æ¡ˆ?ï¼‰ã€‚</p>\n<ul>\n<li>æ”¹çš„æª”æ¡ˆæ˜¯æœ€æ–°ç‰ˆçš„å—ï¼Ÿ</li>\n<li>è¦†è“‹åˆ¥äººçµ¦çš„æª”æ¡ˆå¾Œï¼ŒåŸæœ¬æ”¹å¥½çš„ç¨‹å¼ä¸è¦‹äº†ã€‚</li>\n<li>ä½ çµ¦çš„æª”æ¡ˆç„¡æ³•åŸ·è¡Œï¼Œèªªæœ‰ç¼ºå°‘ functionã€‚</li>\n<li>ã€å¯ä»¥åªçµ¦æä¾›ä¿®æ”¹çš„ function å—ï¼Ÿã€ã€Œæˆ‘å…¶å¯¦ä¹Ÿä¸å¤ªç¢ºå®šè€¶ï¼Œé‚„æ˜¯ä½ æ•´å€‹è²¼ä¸Šå¾Œè©¦è©¦çœ‹æœ‰æ²’æœ‰éŒ¯èª¤ã€</li>\n</ul>\n<h1 id=\"æ–°æ‰‹æ‘\"><a class=\"anchor\" href=\"#æ–°æ‰‹æ‘\">#</a> æ–°æ‰‹æ‘</h1>\n<p>æ‘é•·è·Ÿæˆ‘ä»‹ç´¹æ‘å­å…§ NPC çš„åŠŸèƒ½ï¼Œé‚„æœ‰ server çš„ä½ˆç½²æ–¹å¼ï¼Œç¨‹å¼ç¢¼ä¸Šå‚³åˆ° GCP linux VM å¾Œä½¿ç”¨ docker build æˆ imageï¼Œå†ä½¿ç”¨ docker compose å•Ÿå‹•å¤šå€‹ container é‹è¡Œæœå‹™ã€‚æœ‰å…©å€‹ VM æ¯å€‹ VM éƒ½æœ‰ 5 å€‹ containerï¼Œé™¤äº†å‰ç«¯ã€å¾Œç«¯ç¨‹å¼å¤–é‚„æœ‰ä¸²æ¥å…¶ä»–æœå‹™ï¼Œä½¿ç”¨çš„ç¨‹å¼èªè¨€æœ‰ Vue.js, Node.js, .NET Core ã€‚</p>\n<h1 id=\"ç¨‹å¼ä¸€è‡´\"><a class=\"anchor\" href=\"#ç¨‹å¼ä¸€è‡´\">#</a> ç¨‹å¼ä¸€è‡´</h1>\n<p>ç‚ºäº†è§£æ±ºç¨‹å¼ç¢¼åŒæ­¥å•é¡Œï¼ŒæŒ‘äº†å¯ä»¥å…è²» private è¨—ç®¡çš„ç‰ˆæœ¬æ§åˆ¶æœå‹™ï¼ŒåŒå­¸å¯ä»¥é ç«¯ä¸Šå‚³ç¨‹å¼ç¢¼ï¼Œå…¶ä»–äººä¹Ÿå¯ä»¥åŒæ­¥ã€‚</p>\n<ol>\n<li class=\"quiz\">ä½¿ç”¨çš„æœå‹™ç‚º <span class=\"gap\"></span> ã€‚\n<ul class=\"options\">\n<li class=\"correct\">GitHub</li>\n<li>PornHub</li>\n</ul>\n</li>\n</ol>\n<p>ç‚ºä»€éº¼è¦é¸ GitHub è€Œä¸æ˜¯ <s>PornHub</s> GitLabï¼Ÿå¿˜è¨˜äº†ï¼Œå¥½åƒè·Ÿ CI/CD çš„å…è²»é …ç›®æœ‰é—œã€‚é›£çš„ä¸æ˜¯é¸æ“‡ä½¿ç”¨çš„ç‰ˆæ§æœå‹™ï¼Œè€Œæ˜¯è¦ä¸Šå‚³å“ªäº›ç¨‹å¼ç¢¼ï¼Ÿé€šå¸¸åœ¨ server ä¸Šé‹è¡Œçš„å°±æ˜¯æœ€æ–°çš„ç¨‹å¼ç¢¼ï¼Œä½¿ç”¨ <a href=\"https://winscp.net/\">WinSCP</a> æŠ“ä¸‹ä¾†å¾Œç•¶ä½œåŸºæº–ï¼Œå› ç‚ºå…¶ä»–åŒå­¸é‚„æœ‰æ”¹åˆ°ä¸€åŠæœªä¸Šå‚³çš„ç¨‹å¼ç¢¼ï¼Œæ‰€ä»¥ä¹Ÿæ”¶é›†å…¶ä»–åŒå­¸çš„ç¨‹å¼ç¢¼é€²è¡Œæ•´ç†åˆä½µã€‚æ•´ç†æ™‚ç™¼ç¾ä¸æ˜¯æ¯å€‹äººçš„é–‹ç™¼ç’°å¢ƒè¨­ç½®éƒ½ä¸€æ¨£ï¼Œæœ‰çš„äººç”¨ Windows æœ‰çš„äººç”¨ Macã€‚</p>\n<p><div class=\"links\"><div class=\"item\" title=\"WinSCP\" style=\"--block-color:#e9546b;\"><a href=\"https://winscp.net/\" class=\"image\" data-background-image=\"https://winscp-static-746341.c.cdn77.org/assets/images/logos/logo.png?v=7008\"></a>\n        <div class=\"info\">\n        <a href=\"https://winscp.net/\" class=\"title\">WinSCP</a>\n        <p class=\"desc\">https://winscp.net/</p>\n        </div></div></div></p>\n<h1 id=\"ç’°å¢ƒä¸€è‡´\"><a class=\"anchor\" href=\"#ç’°å¢ƒä¸€è‡´\">#</a> ç’°å¢ƒä¸€è‡´</h1>\n<p>é›–ç„¶ç¨‹å¼ç¢¼ä¸€è‡´äº†ï¼Œä½†ç›¸åŒçš„ç¨‹å¼ç¢¼åœ¨ä¸åŒé–‹ç™¼ç’°å¢ƒå»æœƒå‡ºç¾ç•°å¸¸ï¼Œ<span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">ä½ å°±ç”¨ node 14 å°±å¥½äº†é˜¿ï¼Œæ²’äº‹å¹¹éº»å‡ç´šè‡ªæ‰¾éº»ç…© ğŸ˜’</span> æ‰€ä»¥é–‹ç™¼ç’°å¢ƒä¹Ÿè¦ä¸€è‡´ã€‚æœ€ç°¡å–®çš„æ–¹æ³•æ˜¯å¤§å®¶éƒ½è£ç›¸åŒçš„ node ç‰ˆæœ¬ï¼Œå‡¡æ˜¯éƒ½æœ‰å€‹ BUTï¼Œå…¨éƒ¨çš„å°ˆæ¡ˆä½¿ç”¨çš„ node ä¸¦ä¸æ˜¯ç›¸åŒç‰ˆæœ¬ï¼Œè€Œä¸”ä¸æ˜¯æ¯å€‹äººéƒ½æœƒç”¨ <a href=\"https://github.com/nvm-sh/nvmNVM\">NVM</a>ã€‚<br />\né›–ç„¶æœ‰çš„äººç”¨ Mac æœ‰çš„äººç”¨ Windowsï¼Œä½†æ˜¯å¤§å®¶éƒ½æ˜¯ç”¨ Visual Studio Codeï¼Œæ‰€ä»¥æŠŠå…¨éƒ¨çš„å°ˆæ¡ˆéƒ½åŠ ä¸Š <a href=\"https://code.visualstudio.com/docs/devcontainers/tutorial\">Dev Containers</a>ï¼Œä¹‹å¾Œæ‰€æœ‰äººé–‹ç™¼çš„æ™‚å€™ï¼Œéƒ½ä½¿ç”¨ <a href=\"https://code.visualstudio.com/docs/devcontainers/tutorial\">Dev Containers</a> é€²å…¥ container é€²è¡Œé–‹ç™¼ã€‚</p>\n<p><div class=\"links\"><div class=\"item\" title=\"visual Studio Code\" style=\"--block-color:#e9546b;\"><a href=\"https://code.visualstudio.com/docs/devcontainers/containers\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://code.visualstudio.com/docs/devcontainers/containers\" class=\"title\">Developing inside a Container</a>\n        <p class=\"desc\">https://code.visualstudio.com/docs/devcontainers/containers</p>\n        </div></div><div class=\"item\" title=\"å…«æ¨“çš„äºº\" style=\"--block-color:#e9546b;\"><a href=\"/2022/05/13/Remote-Containers/\" class=\"image\" data-background-image=\"/assets/avatar.jpg\"></a>\n        <div class=\"info\">\n        <a href=\"/2022/05/13/Remote-Containers/\" class=\"title\">ä½¿ç”¨ VSCode åœ¨ Docker container å…§é€²è¡Œé–‹ç™¼</a>\n        <p class=\"desc\">/2022/05/13/Remote-Containers/</p>\n        </div></div></div></p>\n<h1 id=\"docker-image-auto-build\"><a class=\"anchor\" href=\"#docker-image-auto-build\">#</a> Docker image auto build</h1>\n<p>ä¸Šé¢æåˆ°ç¨‹å¼æœ€å¾Œéƒ½åœ¨ server ä¸Š build image å¾Œï¼Œä½¿ç”¨ docker compose å»ºç«‹ container åŸ·è¡Œã€‚ <ins>ä½ çµ‚ç©¶è¦ image çš„é‚£ç‚ºä»€éº¼ä¸ä¸€é–‹å§‹å°± imageï¼Ÿ</ins> æ‰€ä»¥æŠŠæ¯å€‹å°ˆæ¡ˆéƒ½åŠ ä¸Š <a href=\"https://docs.github.com/en/actions/quickstart\">GitHub Action</a>ï¼Œå¼•ç”¨åŸæœ¬å°±æœ‰çš„ Dockerfile ä¿®æ”¹ï¼Œç¨‹å¼ä¸Šå‚³å¾Œæœƒè‡ªå‹•æ‰“åŒ…æˆ docker image ä¸” push åˆ° <a href=\"https://docs.github.com/en/packages/learn-github-packages/introduction-to-github-packages\">GitHub Package</a></p>\n<p>åœ¨ GitHub Action ä½¿ç”¨ä¸‹é¢çš„ ymlï¼Œç¨‹å¼ç¢¼ä¸Šå‚³åˆ° GitHub å¾Œæœƒè‡ªå‹•æ‰“åŒ…æˆ docker image</p>\n<p><a href=\"https://gist.github.com/8loser/4f78378d21358e8d4174bb9e8d872af3\">Gist Auto build docker image yml</a></p>\n<p>å¦‚æœè¨­å®šæˆåŠŸ push ç¨‹å¼ç¢¼å¾Œå¯ä»¥åœ¨ GitHub Action çœ‹åˆ°åŸ·è¡Œå‹•ä½œ<br />\n<img loading=\"lazy\" src=\"github-action.png\" alt=\"GitHub Action\" /></p>\n<p><div class=\"links\"><div class=\"item\" title=\"Quickstart for GitHub Actions\" style=\"--block-color:#e9546b;\"><a href=\"https://docs.github.com/en/actions/quickstart\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://docs.github.com/en/actions/quickstart\" class=\"title\">Quickstart for GitHub Actions</a>\n        <p class=\"desc\">https://docs.github.com/en/actions/quickstart</p>\n        </div></div><div class=\"item\" title=\"docker/build-push-action\" style=\"--block-color:#e9546b;\"><a href=\"https://github.com/docker/build-push-action\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://github.com/docker/build-push-action\" class=\"title\">docker/build-push-action</a>\n        <p class=\"desc\">https://github.com/docker/build-push-action</p>\n        </div></div></div></p>\n<h1 id=\"docker-ç®¡ç†\"><a class=\"anchor\" href=\"#docker-ç®¡ç†\">#</a> Docker ç®¡ç†</h1>\n<p>é‘‘æ–¼ä¸æ˜¯æ‰€æœ‰åŒå­¸éƒ½ç¿’æ…£ç”¨ linuxï¼Œæ‰€ä»¥åœ¨ server è£ä¸Š <a href=\"https://www.portainer.io\">portainer</a>ï¼Œå¯ä»¥ä½¿ç”¨ Web ç•Œé¢æ§åˆ¶ server ä¸Šçš„ dockerã€‚ä¸€å¤©åˆå¹³å®‰çš„éå»äº†ï¼Œæ„Ÿè¬é£›å¤©å°å¥³è­¦çš„åŠªåŠ›ã€‚</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Install Portainer CE with Docker on Linux\" style=\"--block-color:#e9546b;\"><a href=\"https://docs.portainer.io/start/install-ce/server/docker/linux\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://docs.portainer.io/start/install-ce/server/docker/linux\" class=\"title\">Install Portainer CE with Docker on Linux</a>\n        <p class=\"desc\">https://docs.portainer.io/start/install-ce/server/docker/linux</p>\n        </div></div></div></p>\n<h1 id=\"è‡ªå‹•ä½ˆç½²\"><a class=\"anchor\" href=\"#è‡ªå‹•ä½ˆç½²\">#</a> è‡ªå‹•ä½ˆç½²</h1>\n<p>å‡ºç¾ bug æ€¥è‘—ä¿®æ­£çš„æ™‚å€™ï¼Œå¯èƒ½ä¸€å¤©è¦ä¸Šå‚³ç¨‹å¼åˆ° server å…«ç™¾æ¬¡ï¼Œä½†ä¸æ˜¯æ‰€æœ‰äººéƒ½çŸ¥é“æ€éº¼æ›´æ–°åˆ° serverï¼Œ<span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">æ‰€ä»¥ç¶­é‹çš„åŒå­¸è¦å¤šé«”è«’å·¥ç¨‹å¸«</span> æ‰€ä»¥åœ¨ portainer é–‹å•Ÿ swarm åŠŸèƒ½å¾Œï¼Œservice å°±å¯ä»¥å•Ÿç”¨ webhook æ¥æ”¶æ›´æ–°é€šçŸ¥ï¼Œæ”¶åˆ°é€šçŸ¥å¾Œè‡ªå‹• pull æ–°çš„ docker image é€²è¡Œä½ˆç½²ï¼Œä¸çŸ¥é“æ€éº¼ä½ˆç½²çš„äººå¯ä»¥ <code>POST</code> å‘¼å« webhook é€²è¡Œ service æ›´æ–°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> swarm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> init</span></span></code></pre>\n<p>è¨­å®šå®Œæˆå¾Œå¯ä»¥åœ¨ portainer é¸å–®çœ‹åˆ° service é …ç›®<br />\n<img loading=\"lazy\" src=\"portainer-menu.png\" alt=\"portainer menu\" /></p>\n<p>é€²å…¥ service å¯ä»¥é–‹å•Ÿ <code>Service webhook</code>ï¼Œç”¢ç”Ÿçš„ç¶²å€å°±æ˜¯ç”¨ä¾†æ¥æ”¶é€šçŸ¥æ‹‰å–æ–° image é‡æ–°ä½ˆç½²çš„<br />\n<img loading=\"lazy\" src=\"portainer-service.png\" alt=\"portainer service\" /></p>\n<p>æ›´æ–° service é‚„è¦å‘¼å« webhook æœ‰é»éº»ç…©ï¼Œå°±äº¤çµ¦ GitHub Action å§ï¼<br />\nåœ¨ GitHub Action åŠ å…¥ä¸‹é¢è¨­å®šå¾Œï¼Œæ¯æ¬¡ push/pull_request (æ ¹æ“š main.ymlè¨­å®š) å°±æœƒè‡ªå‹•æ›´æ–°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Call webhook update service</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> muinmomin/webhook-action@v1.0.0</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  with</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    url</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # è¦é€šçŸ¥çš„ webhook URL</span></span></code></pre>\n<p><div class=\"links\"><div class=\"item\" title=\"portainer.io\" style=\"--block-color:#e9546b;\"><a href=\"https://docs.portainer.io/user/docker/services/webhooks#enabling-a-service-webhook\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://docs.portainer.io/user/docker/services/webhooks#enabling-a-service-webhook\" class=\"title\">Enabling a service webhook</a>\n        <p class=\"desc\">https://docs.portainer.io/user/docker/services/webhooks#enabling-a-service-webhook</p>\n        </div></div><div class=\"item\" title=\"muinmomin/webhook-action\" style=\"--block-color:#e9546b;\"><a href=\"https://github.com/muinmomin/webhook-action\" class=\"image\" data-background-image=\"/assets/404.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://github.com/muinmomin/webhook-action\" class=\"title\">muinmomin/webhook-action</a>\n        <p class=\"desc\">https://github.com/muinmomin/webhook-action</p>\n        </div></div></div></p>\n<h1 id=\"æ­£å¼ç«™æ¸¬è©¦ç«™\"><a class=\"anchor\" href=\"#æ­£å¼ç«™æ¸¬è©¦ç«™\">#</a> æ­£å¼ç«™/æ¸¬è©¦ç«™</h1>\n<p>ç•¶æ¥­å‹™å¤–å‡ºè·Ÿå®¢æˆ¶å±•ç¤ºç³»çµ±åŠŸèƒ½æ™‚ï¼Œå¦‚æœç¶²ç«™ä¸€ç›´æ›´æ–°é‡å•Ÿæœå‹™ä¸­æ–·ï¼Œåœ¨å®¢æˆ¶ç«¯çš„åŒå­¸æœƒå¾ˆå°·å°¬ï¼Œ<span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">æ‰€ä»¥æœ‰æ¥­å‹™åœ¨å¤–å±•ç¤ºæ™‚å·¥ç¨‹å¸«å¯ä»¥æ”¾å‡</span> æ‰€ä»¥æŠŠç·šä¸Šç³»çµ±åˆ†ç‚ºæ­£å¼ç«™è·Ÿæ¸¬è©¦ç«™ã€‚</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> GCP VM å…©å°è®Šå››å°</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> è¨­å®šæ¸¬è©¦ç«™ subdomain</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_2\"> GitHub è¨­å®š main/test å…©å€‹åˆ†æ”¯</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_3\"> GitHub Action è¨­å®šåªæœ‰ test åˆ†æ”¯ push æ™‚æ‰è‡ªå‹•æ›´æ–°åˆ°æ¸¬è©¦ç«™</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> ä½ å‡è·ï¼Œæˆ‘åŠ è–ªï¼Œå¤§å®¶é–‹é¦™æª³ï½ï¼¹ï¼¡</label></li>\n</ul>\n<p><img loading=\"lazy\" src=\"Love-on-Delivery.gif\" alt=\"ç ´å£ä¹‹ç‹\" /></p>\n",
            "tags": [
                "Need to Know",
                "Story"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/02/11/redis-cluster/",
            "url": "https://8loser.github.io/2023/02/11/redis-cluster/",
            "title": "GKE ä½ˆç½² Redis å¢é›†",
            "date_published": "2023-02-11T10:07:24.000Z",
            "content_html": "<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<p>åœ¨ <a href=\"https://cloud.google.com/kubernetes-engine?hl=zh-tw\">Google Kubernetes Engine (GKE)</a> å…§å»ºç½® Redis å¢é›†</p>\n<ul>\n<li>GKE node: g1-small * 2 (version 1.24.8-gke.2000)</li>\n<li>Redis 7</li>\n</ul>\n<h1 id=\"å»ºç«‹-configmap\"><a class=\"anchor\" href=\"#å»ºç«‹-configmap\">#</a> å»ºç«‹ ConfigMap</h1>\n<p>å»ºç«‹çµ¦ redis ç¯€é»ä½¿ç”¨çš„å…±ç”¨è¨­å®šæª”ï¼Œåç¨±ç‚º <code>redis-cluster</code>ï¼Œä¹‹å¾Œå»ºç«‹ç‚º volume è®“æ¯å€‹å®¹å™¨ä½¿ç”¨</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yaml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">apiVersion</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">kind</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ConfigMap</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">metadata</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">data</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  update-node.sh</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    #!/bin/sh</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    REDIS_NODES=\"/data/nodes.conf\"</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    sed -i -e \"/myself/ s/[0-9]\\&#123;1,3\\&#125;\\.[0-9]\\&#123;1,3\\&#125;\\.[0-9]\\&#123;1,3\\&#125;\\.[0-9]\\&#123;1,3\\&#125;/$&#123;POD_IP&#125;/\" $&#123;REDIS_NODES&#125;</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    exec \"$@\"</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  redis.conf</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">+</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cluster-enabled yes</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cluster-require-full-coverage no</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cluster-node-timeout 15000</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cluster-config-file /data/nodes.conf</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cluster-migration-barrier 1</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    appendonly yes</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    protected-mode no</span></span></code></pre>\n<p>å»ºç«‹æˆåŠŸå¾Œå¯ä»¥åœ¨ GKE ç•Œé¢çš„ <code>Secretèˆ‡ConfigMap</code> å…§çœ‹åˆ°æ–°å¢çš„ <code>redis-cluster</code></p>\n<p><img loading=\"lazy\" src=\"gke-configmap.png\" alt=\"ConfigMap\" /></p>\n<h1 id=\"å»ºç«‹-statefulset\"><a class=\"anchor\" href=\"#å»ºç«‹-statefulset\">#</a> å»ºç«‹ StatefulSet</h1>\n<ul>\n<li>StatefulSet éœ€è¦ä½¿ç”¨ Kubernetes v1.9 æˆ–ä¹‹å¾Œçš„ç‰ˆæœ¬æ‰æ”¯æ´</li>\n<li>.spec.selector.matchLabels è¦è·Ÿ .spec.template.metadata.labels ç›¸åŒ</li>\n<li>.spec.replicas è‡³å°‘è¦ 6 å€‹ï¼Œredis cluster è‡³å°‘è¦ 6 å€‹ç¯€é»; 3 å€‹ master, 3 å€‹ slave, ä¸éé‚„æ²’æŸ¥åˆ°ç‚ºä»€éº¼ã€‚</li>\n</ul>\n<p>åƒè€ƒæ–‡ç« åœ¨ .spec.selector.template.spec.containers.volumes.defaultMode æ˜¯å¯« <code>0755</code>(å…«é€²ä½)ï¼Œä½†æ˜¯æˆ‘åœ¨ Lens å…§åŸ·è¡Œæ™‚æœƒå‡ºç¾ä¸‹é¢éŒ¯èª¤ï¼Œæ‰€ä»¥æ”¹æˆåé€²ä½çš„ <code>493</code></p>\n<div class=\"note warning\">\n<p>create Pod redis-cluster-0 in StatefulSet redis-cluster failed error: Pod &quot;redis-cluster-0&quot; is invalid: [spec.volumes[1].configMap.defaultMode: Invalid value: 755: must be a number between 0 and 0777 (octal), both inclusive, spec.containers[0].volumeMounts[0].name: Not found: &quot;conf&quot;]</p>\n</div>\n<p>å®Œæ•´ yaml</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yaml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">apiVersion</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> apps/v1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">kind</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> StatefulSet</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">metadata</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">spec</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  serviceName</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  replicas</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # by default is 1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  selector</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    matchLabels</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      app</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # has to match .spec.template.metadata.labels</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  template</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    metadata</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      labels</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        app</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> # has to match .spec.selector.matchLabels</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    spec</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      containers</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        image</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis:7</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        ports</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> containerPort</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> containerPort</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 16379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> gossip</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        command</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/conf/update-node.sh</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">redis-server</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/conf/redis.conf</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        env</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> POD_IP</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          valueFrom</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">            fieldRef</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">              fieldPath</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> status.podIP</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        volumeMounts</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          mountPath</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          readOnly</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> false</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> data</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          mountPath</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /data</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          readOnly</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> false</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      volumes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        configMap</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">          # defaultMode: 0755</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          defaultMode</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 493</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  volumeClaimTemplates</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> metadata</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> data</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    spec</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      accessModes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ReadWriteOnce</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">      resources</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        requests</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          storage</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1Gi</span></span></code></pre>\n<p>åŸ·è¡Œå®Œç­‰ä¸€ä¸‹<br />\n<img loading=\"lazy\" src=\"Let_the_Bullets_Fly.png\" alt=\"è®“å­å½ˆé£›ä¸€æœƒå…’\" /></p>\n<p>ä¹‹å¾Œå¯ä»¥åœ¨ GKE çš„ <code>å·¥ä½œè² è¼‰</code> å…§çœ‹åˆ° 6 å€‹ Pod å»ºç«‹å®Œæˆ<br />\n<img loading=\"lazy\" src=\"gke-stateful.png\" alt=\"Pods\" /></p>\n<p><code>å„²å­˜ç©ºé–“</code> ä¹Ÿæœƒç”¢ç”Ÿ 6 å€‹ PVC (PersistentVolumeClaim)<br />\n<img loading=\"lazy\" src=\"gke-pvc.png\" alt=\"PVC\" /></p>\n<p>æˆ–è€…ä½¿ç”¨æŒ‡ä»¤æŸ¥çœ‹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pods</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">NAME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">              READY</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   STATUS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    RESTARTS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   AGE</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          8m31s</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          8m19s</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          8m7s</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-3</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          7m56s</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          7m39s</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster-5</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1/1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     Running</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          7m28s</span></span></code></pre>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pv</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">NAME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">                                       CAPACITY</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   ACCESS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> MODES</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   RECLAIM</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> POLICY</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   STATUS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   CLAIM</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">                          STORAGECLASS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   REASON</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   AGE</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-01fc7eb6-e99a-4111-8923-53229eb112b4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            21m</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-4bc387e4-dd4c-4400-b99a-e75a720e509b</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            21m</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-af768f00-7889-4fa5-9ef8-cb95337ef38a</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-5</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            20m</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-b6dadea9-b10e-42cb-8ae4-729b186e8b7c</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            21m</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-c42ebfa4-a726-42f5-b146-18c28de544a4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            20m</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pvc-d1d4de96-2f91-4050-9707-8fd802bd7fb4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   1Gi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        RWO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            Delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Bound</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    default/data-redis-cluster-3</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   standard-rwo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            21m</span></span></code></pre>\n<h1 id=\"å»ºç«‹-service\"><a class=\"anchor\" href=\"#å»ºç«‹-service\">#</a> å»ºç«‹ Service</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yaml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">apiVersion</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">kind</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Service</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">metadata</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">spec</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  ports</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> port</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    targetPort</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> client</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> port</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 16379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    targetPort</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 16379</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> gossip</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  selector</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    app</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span></code></pre>\n<p>åŸ·è¡Œå®Œæª¢æŸ¥ Service <code>redis-cluster</code> æ˜¯å¦æˆåŠŸå»ºç«‹<br />\n<img loading=\"lazy\" src=\"gke-service.png\" alt=\"service\" /></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> service</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">NAME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">            TYPE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        CLUSTER-IP</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    EXTERNAL-IP</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   PORT</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">S</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">              AGE</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">redis-cluster</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   ClusterIP</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   10.80.5.184</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">   </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">non</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        6379/TCP,16379/TCP</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   2m50s</span></span></code></pre>\n<h1 id=\"å»ºç«‹-redis-å¢é›†\"><a class=\"anchor\" href=\"#å»ºç«‹-redis-å¢é›†\">#</a> å»ºç«‹ Redis å¢é›†</h1>\n<p>åƒè€ƒçš„æ–‡ç« ä½¿ç”¨çš„æŒ‡ä»¤å¦‚ä¸‹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -it</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster-0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cli</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --cluster</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> create</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --cluster-replicas</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\"> $</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pods</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> app=redis-cluster</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> jsonpath=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#123;range.items[*]&#125;&#123;.status.podIP&#125;:6379 </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<p>å¯¦éš›å¯¦è¡Œçµæœæœƒå‡ºç¾å¦‚ä¸‹éŒ¯èª¤</p>\n<div class=\"note danger\">\n<p>kubectl exec -it redis-cluster-0 -- redis-cli --cluster create --cluster-replicas 1 $(kubectl get pods -l app=redis-cluster -o jsonpath='{range.items[*]}{.status.podIP}:6379 ')</p>\n</div>\n<p>æŸ¥çœ‹åŸå› æ˜¯ <code>kubectl get pods -l app=redis-cluster -o jsonpath='&#123;range.items[*]&#125;&#123;.status.podIP&#125;</code> æœƒå¤šä¸€çµ„ç©ºçš„ IP</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pods</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> app=redis-cluster</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> jsonpath=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#123;range.items[*]&#125;&#123;.status.podIP&#125;:6379 </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.2.30:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 10.76.1.32:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 10.76.2.31:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 10.76.1.33:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 10.76.2.32:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 10.76.1.34:6379</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> :6379</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span></code></pre>\n<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤æŸ¥çœ‹æ¯”è¼ƒæ˜é¡¯</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pods</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> app=redis-cluster</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> jsonpath=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#123;range.items[*]&#125;&#123;.status.podIP&#125;:6379&#123;\"\\n\"&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.2.30:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.1.32:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.2.31:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.1.33:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.2.32:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">10.76.1.34:6379</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">:6379</span></span></code></pre>\n<p>ä¿®æ”¹å¾ŒæŒ‡ä»¤å¦‚ä¸‹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -it</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster-0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cli</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --cluster</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> create</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --cluster-replicas</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\"> $</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pods</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -o=jsonpath=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#123;range .items[*]&#125;&#123;.status.podIP&#125;:6379 &#123;end&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<p><code>Can I set the above configuration?</code> è¼¸å…¥ <code>yes</code>ï¼ŒåŸ·è¡Œçµæœå¯ä»¥çœ‹åˆ°å»ºç«‹äº† 3 å€‹ redis master ç¯€é»ï¼Œ3 å€‹ slave ç¯€é»ã€‚</p>\n<details class=\"info\"><summary>åŸ·è¡Œçµæœ</summary><div>\n<p>$ kubectl exec -it redis-cluster-0 -- redis-cli --cluster create --cluster-replicas 1 $(kubectl get pods -o=jsonpath='{range .items[*]}{.status.podIP}:6379 {end}')<br />\n&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...<br />\nMaster[0] -&gt; Slots 0 - 5460<br />\nMaster[1] -&gt; Slots 5461 - 10922<br />\nMaster[2] -&gt; Slots 10923 - 16383<br />\nAdding replica 10.76.2.32:6379 to 10.76.2.30:6379<br />\nAdding replica 10.76.1.34:6379 to 10.76.1.32:6379<br />\nAdding replica 10.76.1.33:6379 to 10.76.2.31:6379<br />\nM: 05ecf3912ed0a5517ab74fd17f81d02a3314a833 10.76.2.30:6379<br />\nslots:[0-5460] (5461 slots) master<br />\nM: 9da23852cfd0a7489c2f53ec743363e48dea378b 10.76.1.32:6379<br />\nslots:[5461-10922] (5462 slots) master<br />\nM: 379127b6974b6acc59e5fb194361749e682bdc97 10.76.2.31:6379<br />\nslots:[10923-16383] (5461 slots) master<br />\nS: 5105cdd3a6637e3844316c557f81c68b231703e7 10.76.1.33:6379<br />\nreplicates 379127b6974b6acc59e5fb194361749e682bdc97<br />\nS: dde0a9ef27e044cd124814529305732c9ab0d9dd 10.76.2.32:6379<br />\nreplicates 05ecf3912ed0a5517ab74fd17f81d02a3314a833<br />\nS: 8a89a45f3161b606b13f1ede95fec240de2bcf9d 10.76.1.34:6379<br />\nreplicates 9da23852cfd0a7489c2f53ec743363e48dea378b<br />\nCan I set the above configuration? (type 'yes' to accept): yes<br />\n&gt;&gt;&gt; Nodes configuration updated<br />\n&gt;&gt;&gt; Assign a different config epoch to each node<br />\n&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster<br />\nWaiting for the cluster to join</p>\n<p>&gt;&gt;&gt; Performing Cluster Check (using node 10.76.2.30:6379)<br />\nM: 05ecf3912ed0a5517ab74fd17f81d02a3314a833 10.76.2.30:6379<br />\nslots:[0-5460] (5461 slots) master<br />\n1 additional replica(s)<br />\nS: dde0a9ef27e044cd124814529305732c9ab0d9dd 10.76.2.32:6379<br />\nslots: (0 slots) slave<br />\nreplicates 05ecf3912ed0a5517ab74fd17f81d02a3314a833<br />\nS: 5105cdd3a6637e3844316c557f81c68b231703e7 10.76.1.33:6379<br />\nslots: (0 slots) slave<br />\nreplicates 379127b6974b6acc59e5fb194361749e682bdc97<br />\nM: 379127b6974b6acc59e5fb194361749e682bdc97 10.76.2.31:6379<br />\nslots:[10923-16383] (5461 slots) master<br />\n1 additional replica(s)<br />\nM: 9da23852cfd0a7489c2f53ec743363e48dea378b 10.76.1.32:6379<br />\nslots:[5461-10922] (5462 slots) master<br />\n1 additional replica(s)<br />\nS: 8a89a45f3161b606b13f1ede95fec240de2bcf9d 10.76.1.34:6379<br />\nslots: (0 slots) slave<br />\nreplicates 9da23852cfd0a7489c2f53ec743363e48dea378b<br />\n[OK] All nodes agree about slots configuration.<br />\n&gt;&gt;&gt; Check for open slots...<br />\n&gt;&gt;&gt; Check slots coverage...<br />\n[OK] All 16384 slots covered.</p>\n</div></details>\n<h1 id=\"é©—è­‰-redis-å¢é›†\"><a class=\"anchor\" href=\"#é©—è­‰-redis-å¢é›†\">#</a> é©—è­‰ Redis å¢é›†</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -it</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster-0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cluster</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> info</span></span></code></pre>\n<details class=\"info\"><summary>åŸ·è¡Œçµæœ</summary><div>\n<p>$ kubectl exec -it redis-cluster-0 -- redis-cli cluster info<br />\ncluster_state:ok<br />\ncluster_slots_assigned:16384<br />\ncluster_slots_ok:16384<br />\ncluster_slots_pfail:0<br />\ncluster_slots_fail:0<br />\ncluster_known_nodes:6<br />\ncluster_size:3<br />\ncluster_current_epoch:6<br />\ncluster_my_epoch:1<br />\ncluster_stats_messages_ping_sent:273<br />\ncluster_stats_messages_pong_sent:278<br />\ncluster_stats_messages_sent:551<br />\ncluster_stats_messages_ping_received:273<br />\ncluster_stats_messages_pong_received:273<br />\ncluster_stats_messages_meet_received:5<br />\ncluster_stats_messages_received:551<br />\ntotal_cluster_links_buffer_limit_exceeded:0</p>\n</div></details>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">for</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> in</span><span style=\"color:#999999;--shiki-dark:#666666\"> $</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">seq</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> do</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">redis-cluster-$x</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> kubectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cluster-</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">$x</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> redis-cli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> role</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> echo</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> done</span></span></code></pre>\n<details class=\"info\"><summary>åŸ·è¡Œçµæœ</summary><div>\n<p>$ for x in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>s</mi><mi>e</mi><mi>q</mi><mn>05</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">;</mo><mi>d</mi><mi>o</mi><mi>e</mi><mi>c</mi><mi>h</mi><mi>o</mi><mi mathvariant=\"normal\">&quot;</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mo>âˆ’</mo><mi>c</mi><mi>l</mi><mi>u</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo>âˆ’</mo></mrow><annotation encoding=\"application/x-tex\">(seq 0 5); do echo &quot;redis-cluster-</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">se</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord\">05</span><span class=\"mclose\">)</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">oec</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord\">&quot;</span><span class=\"mord mathnormal\">re</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord\">âˆ’</span></span></span></span>x&quot;; kubectl exec redis-cluster-$x -- redis-cli role; echo; done<br />\nredis-cluster-0<br />\nmaster<br />\n504<br />\n10.76.2.32<br />\n6379<br />\n504</p>\n<p>redis-cluster-1<br />\nmaster<br />\n504<br />\n10.76.1.34<br />\n6379<br />\n504</p>\n<p>redis-cluster-2<br />\nmaster<br />\n490<br />\n10.76.1.33<br />\n6379<br />\n490</p>\n<p>redis-cluster-3<br />\nslave<br />\n10.76.2.31<br />\n6379<br />\nconnected<br />\n490</p>\n<p>redis-cluster-4<br />\nslave<br />\n10.76.2.30<br />\n6379<br />\nconnected<br />\n504</p>\n<p>redis-cluster-5<br />\nslave<br />\n10.76.1.32<br />\n6379<br />\nconnected<br />\n504</p>\n</div></details>\n<h1 id=\"yaml-æª”æ¡ˆ\"><a class=\"anchor\" href=\"#yaml-æª”æ¡ˆ\">#</a> YAML æª”æ¡ˆ</h1>\n<p><a href=\"https://github.com/8loser/redis-sts\">GitHub: 8loser/redis-sts</a></p>\n<h1 id=\"åƒè€ƒ\"><a class=\"anchor\" href=\"#åƒè€ƒ\">#</a> åƒè€ƒ</h1>\n<p><a href=\"https://www.suse.com/c/rancher_blog/deploying-redis-cluster-on-top-of-kubernetes/\">Deploying Redis Cluster on Top of Kubernetes February 22, 2019 | By: Rancher Admin</a></p>\n",
            "tags": [
                "Redis",
                "GKE",
                "Kubernetes"
            ]
        },
        {
            "id": "https://8loser.github.io/2023/01/04/gcp-init/",
            "url": "https://8loser.github.io/2023/01/04/gcp-init/",
            "title": "GCP VM åˆå§‹åŒ–",
            "date_published": "2023-01-04T07:32:51.000Z",
            "content_html": "<h1 id=\"ä¸»æ—¨\"><a class=\"anchor\" href=\"#ä¸»æ—¨\">#</a> ä¸»æ—¨</h1>\n<p>æŠŠå°ˆæ¡ˆé‹è¡Œçš„ GCP VM ç’°å¢ƒä½ˆç½²å‹•ä½œæ•´ç†ï¼Œå»ºç«‹ shell script é€²è¡Œå¿«é€Ÿä½ˆç½²ã€‚ä½¿ç”¨ä½œæ¥­ç³»çµ±ç‚º Linux Ubuntu</p>\n<h1 id=\"åŸ·è¡Œä¹‹å‰\"><a class=\"anchor\" href=\"#åŸ·è¡Œä¹‹å‰\">#</a> åŸ·è¡Œä¹‹å‰</h1>\n<p>å…ˆåŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼Œåˆ‡æ›ç‚º root è§’è‰²</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-shell\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> su</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> -</span></span></code></pre>\n<h1 id=\"è¦æ–°å¢çš„-linux-å¸³è™Ÿ\"><a class=\"anchor\" href=\"#è¦æ–°å¢çš„-linux-å¸³è™Ÿ\">#</a> è¦æ–°å¢çš„ Linux å¸³è™Ÿ</h1>\n<p>æŠŠè¦æ–°å¢çš„å¸³è™Ÿã€å¯†ç¢¼ä½œç‚ºè®Šæ•¸å¯«åœ¨ script æœ€ä¸Šé¢ï¼Œç‚ºäº†çµ¦å…±åŒç¶­è­·çš„äººç™»å…¥ç”¨çš„ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">ACCOUNT</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å¸³è™Ÿ</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">PASSWORD</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å¯†ç¢¼</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span></code></pre>\n<h1 id=\"github-å¸³è™Ÿ\"><a class=\"anchor\" href=\"#github-å¸³è™Ÿ\">#</a> GitHub å¸³è™Ÿ</h1>\n<p>åŸ·è¡Œç’°å¢ƒæœƒæŠŠ docker image å¾ GitHub registry æŠ“ä¸‹ä¾†åŸ·è¡Œï¼Œæ‰€ä»¥åœ¨ script æœ€ä¸Šé¢æŠŠ GitHub æ¬Šé™è¨­å®šç‚ºè®Šæ•¸ï¼Œä¹‹å¾ŒåŸ·è¡Œè®€å–è®Šæ•¸å³å¯ã€‚å¯†ç¢¼ç‚º PATï¼ˆpersonal access tokenï¼‰ï¼Œå»ºç«‹æ–¹æ³•è«‹åƒè€ƒ <a href=\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token\">å»ºç«‹ PAT</a>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">GITHUB_ACCOUNT</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">githubå¸³è™Ÿ</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">GITHUB_PAT</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">github</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> PAT</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">></span></span></code></pre>\n<h1 id=\"è¨­å®šæ™‚å€\"><a class=\"anchor\" href=\"#è¨­å®šæ™‚å€\">#</a> è¨­å®šæ™‚å€</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">timedatectl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> set-timezone</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Asia/Taipei</span></span></code></pre>\n<h1 id=\"ä½œæ¥­ç³»çµ±æ›´æ–°\"><a class=\"anchor\" href=\"#ä½œæ¥­ç³»çµ±æ›´æ–°\">#</a> ä½œæ¥­ç³»çµ±æ›´æ–°</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> update</span><span style=\"color:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> apt</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> upgrade</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> clean</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> autoremove</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span></span></code></pre>\n<h1 id=\"å•Ÿç”¨-google-bbr\"><a class=\"anchor\" href=\"#å•Ÿç”¨-google-bbr\">#</a> å•Ÿç”¨ Google BBR</h1>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">modprobe</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> tcp_bbr</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">tcp_bbr</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/modules-load.d/modules.conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">net.core.default_qdisc=fq</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/sysctl.conf</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">net.ipv4.tcp_congestion_control=bbr</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/sysctl.conf</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sysctl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span></span></code></pre>\n<h1 id=\"install-ops-agent\"><a class=\"anchor\" href=\"#install-ops-agent\">#</a> Install Ops Agent</h1>\n<p>å®‰è£ <a href=\"https://cloud.google.com/stackdriver/docs/solutions/agents/ops-agent\">GCP agent</a>ï¼Œå¦‚æœä¸æ˜¯ä½¿ç”¨ GCP å¯ä»¥ä¸ç”¨åŸ·è¡Œ</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -sSO</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://dl.google.com/cloudagents/add-google-cloud-ops-agent-repo.sh</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">bash</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add-google-cloud-ops-agent-repo.sh</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --also-install</span></span></code></pre>\n<h1 id=\"å®‰è£-docker\"><a class=\"anchor\" href=\"#å®‰è£-docker\">#</a> å®‰è£ Docker</h1>\n<p>æ‰€æœ‰å°ˆæ¡ˆéƒ½ä»¥ container å½¢å¼ä½¿ç”¨ docker compose é‹è¡Œã€‚å®‰è£ docker æ²’æ¯›ç—…ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ca-certificates</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> gnupg</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> lsb-release</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">mkdir</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/keyrings</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -fsSL</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> https://download.docker.com/linux/ubuntu/gpg</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> gpg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --dearmor</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/keyrings/docker.gpg</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">deb [arch=</span><span style=\"color:#999999;--shiki-dark:#666666\">$(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">dpkg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --print-architecture</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu </span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">  $(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">lsb_release</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -cs</span><span style=\"color:#999999;--shiki-dark:#666666\">)</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> stable</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> tee</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/sources.list.d/docker.list</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/null</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker-ce</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker-ce-cli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> containerd.io</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker-compose-plugin</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -y</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -q</span></span></code></pre>\n<h1 id=\"å®‰è£-portainer-with-docker-swarm\"><a class=\"anchor\" href=\"#å®‰è£-portainer-with-docker-swarm\">#</a> å®‰è£ Portainer with Docker Swarm</h1>\n<p>ä½¿ç”¨ portainer ç®¡ç† containerï¼Œportainer å¾ˆæ£’ï¼Œæ˜¯ web ç•Œé¢ã€‚åŠ ä¸Š docker swarm æ˜¯ç‚ºäº†è®“ç¨‹å¼ä¸Šå‚³å¾Œå¯ä»¥é€šçŸ¥ server å» pull æ–°çš„ image è‡ªå‹•ä½ˆç½²ã€‚<code>ä¸€è¨€ä¸åˆå°± CI/CD</code></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> volume</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> create</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> portainer_data</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 8000:8000</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 9443:9443</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 9000:9000</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --name</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> portainer</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --restart=always</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -v</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /var/run/docker.sock:/var/run/docker.sock</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -v</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> portainer_data:/data</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> portainer/portainer-ce:latest</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> swarm</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> init</span></span></code></pre>\n<h1 id=\"å»ºç«‹-crond-docker-prune\"><a class=\"anchor\" href=\"#å»ºç«‹-crond-docker-prune\">#</a> å»ºç«‹ crond docker-prune</h1>\n<p>æ¯å¤©è‡ªå‹•æ¸…ç† docker åƒåœ¾ï¼Œæ¯æ¬¡æ›´æ–°ç”¢ç”Ÿæ²’ç”¨çš„ imageã€cointainer å¤ªå¤šæœƒé€ æˆä¸»æ©Ÿå®¹é‡ä¸è¶³æ›æ‰ã€‚<br />\n<s>ä¸ç„¶æ¯æ¬¡æ›æ‰è€é—†éƒ½ç½µæˆ‘ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ç‚ºä»€éº¼æœ‰äººä¸€å¤©è¦ commit 600æ¬¡</s></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cat</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/cron.daily/docker-prune</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> EOL</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">docker system prune -af</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">EOL</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">chmod</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ugo+x</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/cron.daily/docker-prune</span></span></code></pre>\n<h1 id=\"å»ºç«‹-linux-å¸³è™Ÿ\"><a class=\"anchor\" href=\"#å»ºç«‹-linux-å¸³è™Ÿ\">#</a> å»ºç«‹ Linux å¸³è™Ÿ</h1>\n<p>ä½¿ç”¨æœ€ä¸Šé¢è¨­å®šçš„è®Šæ•¸å»ºç«‹å¸³è™Ÿï¼Œè®“å…¶ä»–ç¶­è­·çš„åŒå­¸ç™»å…¥ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">useradd</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">update user</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /bin/bash</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -m</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> $ACCOUNT</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">$ACCOUNT:$PASSWORD</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> chpasswd</span></span></code></pre>\n<h1 id=\"ç™»å…¥-docker-registry\"><a class=\"anchor\" href=\"#ç™»å…¥-docker-registry\">#</a> ç™»å…¥ Docker registry</h1>\n<p>ç™»å…¥ GitHub registry ä¹‹å¾Œ docker pull å°±ä¸ç”¨è¼¸å…¥å¯†ç¢¼ï¼Œè®šï¼</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">echo</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> $GITHUB_PAT</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> login</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ghcr.io</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --username</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> $GITHUB_ACCOUNT</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --password-stdin</span></span></code></pre>\n<h1 id=\"å®Œæ•´-shell-script\"><a class=\"anchor\" href=\"#å®Œæ•´-shell-script\">#</a> å®Œæ•´ shell script</h1>\n<ul>\n<li><a href=\"https://gist.github.com/8loser/f54b673b93a2df296887c2bd6edf96e8\">https://gist.github.com/8loser/f54b673b93a2df296887c2bd6edf96e8</a></li>\n</ul>\n",
            "tags": [
                "Linux",
                "Shell script",
                "GCP"
            ]
        },
        {
            "id": "https://8loser.github.io/2022/10/21/nginx-websocket/",
            "url": "https://8loser.github.io/2022/10/21/nginx-websocket/",
            "title": "Nginx websocket ç„¡æ³•é€£æ¥",
            "date_published": "2022-10-21T09:10:38.000Z",
            "content_html": "<h1 id=\"ç’°å¢ƒ\"><a class=\"anchor\" href=\"#ç’°å¢ƒ\">#</a> ç’°å¢ƒ</h1>\n<p>åœ¨ docker compose ä¸­ï¼Œä½¿ç”¨ nginx å°å‘ websocket åˆ° container å…§</p>\n<h1 id=\"éŒ¯èª¤è¨Šæ¯\"><a class=\"anchor\" href=\"#éŒ¯èª¤è¨Šæ¯\">#</a> éŒ¯èª¤è¨Šæ¯</h1>\n<p>websocket é€£æ¥ä¸ä¸Šï¼ŒæŸ¥çœ‹ request headers é¡¯ç¤º <code>Provisional headers are shown</code></p>\n<p><img loading=\"lazy\" src=\"provisional_headers_are_shown.png\" alt=\"provisional headers are shown\" /></p>\n<h1 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h1>\n<p>æœå°‹è§£æ±ºæ–¹æ³•æ˜¯åœ¨ nginx.conf å…§åŠ ä¸Š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Upgrade </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">http_upgrade</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Connection </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"upgrade\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<h2 id=\"ç¯„ä¾‹\"><a class=\"anchor\" href=\"#ç¯„ä¾‹\">#</a> ç¯„ä¾‹</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">location</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> /backend/ </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_pass </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">http://backend/</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Host </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">host</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Real-IP </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">remote_addr</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Forwarded-For </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">proxy_add_x_forwarded_for</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">X-Custom-Referrer smc_identity_layer</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # websocket è¦åŠ ä¸‹é¢å…©å€‹</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Upgrade </span><span style=\"color:#999999;--shiki-dark:#666666\">$</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">http_upgrade</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    proxy_set_header </span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Connection </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">\"upgrade\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h1 id=\"é©—è­‰\"><a class=\"anchor\" href=\"#é©—è­‰\">#</a> é©—è­‰</h1>\n<p>æ¯”è¼ƒæœ‰ä¿®æ­£å‰è·Ÿä¿®æ­£å¾Œï¼Œå¾Œç«¯å¯¦éš›æ”¶åˆ°çš„ request header</p>\n<h2 id=\"ä¿®æ­£å‰-request-headers\"><a class=\"anchor\" href=\"#ä¿®æ­£å‰-request-headers\">#</a> ä¿®æ­£å‰ request headers</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-js\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Headers</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">localhost</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-real-ip</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">192.168.224.1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-forwarded-for</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">192.168.224.1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-custom-referrer</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">smc_identity_layer</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">connection</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">close</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">pragma</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">no-cache</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">cache-control</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">no-cache</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">user-agent</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">origin</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">chrome-extension://cbcbkhdmedgianpaifchdaddpnmgnknn</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-version</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">13</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">accept-encoding</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">gzip, deflate, br</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">accept-language</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-key</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iBVj1v1X8xkD324lsXZSUA==</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-extensions</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">permessage-deflate; client_max_window_bits</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<h2 id=\"ä¿®æ­£å¾Œ-request-headers\"><a class=\"anchor\" href=\"#ä¿®æ­£å¾Œ-request-headers\">#</a> ä¿®æ­£å¾Œ request headers</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-js\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Headers</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">localhost</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-real-ip</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">192.168.208.1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-forwarded-for</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">192.168.208.1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">x-custom-referrer</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">smc_identity_layer</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">upgrade</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">websocket</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">connection</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">upgrade</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">pragma</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">no-cache</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">cache-control</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">no-cache</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">user-agent</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">origin</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">chrome-extension://cbcbkhdmedgianpaifchdaddpnmgnknn</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-version</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">13</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">accept-encoding</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">gzip, deflate, br</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">accept-language</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-key</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">j2NwT86WmJt6rIyatTa5rw==</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sec-websocket-extensions</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">permessage-deflate; client_max_window_bits</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n",
            "tags": [
                "Trouble",
                "Nginx",
                "WebSocket"
            ]
        }
    ]
}