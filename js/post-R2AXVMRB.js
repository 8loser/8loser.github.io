import{a as J,d as se}from"./chunk-PZBKB43S.js";import{A as me,D as Y,E as I,F as he,G as C,H as X,I as te,J as P,M as B,N as fe,P as y,U as ge,a as Q,c as ce,j as m,k as ue,p as de,s as ee,t as ve,v as $,w as pe,x as Z}from"./chunk-NQVJKSRO.js";import{b as le,e as ie,f as re,g as K,h as U}from"./chunk-LSAPWSE3.js";import{a as ae,g as G}from"./chunk-2S3TTT3F.js";import"./chunk-PJZZZVUD.js";import{a as D}from"./chunk-JQWFU4IS.js";import"./chunk-WIQECBEN.js";D();D();D();function ze(o,t,e){var n=e||{},l=n.noTrailing,c=l===void 0?!1:l,h=n.noLeading,s=h===void 0?!1:h,L=n.debounceMode,i=L===void 0?void 0:L,u,v=!1,p=0;function w(){u&&clearTimeout(u)}function T(S){var f=S||{},b=f.upcomingOnly,g=b===void 0?!1:b;w(),v=!g}function z(){for(var S=arguments.length,f=new Array(S),b=0;b<S;b++)f[b]=arguments[b];var g=this,k=Date.now()-p;if(v)return;function M(){p=Date.now(),t.apply(g,f)}function q(){u=void 0}!s&&i&&!u&&M(),w(),i===void 0&&k>o?s?(p=Date.now(),c||(u=setTimeout(i?q:M,o))):M():c!==!0&&(u=setTimeout(i?q:M,i===void 0?o-k:o))}return z.cancel=T,z}function He(o,t={}){let e=m(null),n=null,l=()=>{if(!o.value)return;let s=o.value.getBoundingClientRect();e.value=s,t.onChange?.(s)},c=t.throttle?ze(t.throttleDelay??100,l,{noTrailing:!1}):l,h=()=>{n?.disconnect(),n=null,window.removeEventListener("resize",c)};return $(()=>{if(o.value&&(l(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(c),n.observe(o.value)),window.addEventListener("resize",c),o.value.tagName==="IMG")){let s=o.value;s.complete||s.addEventListener("load",l,{once:!0})}}),Z(h),Y(()=>{if(h(),!!o.value){if(l(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(c),n.observe(o.value)),window.addEventListener("resize",c),o.value.tagName==="IMG"){let s=o.value;s.complete||s.addEventListener("load",l,{once:!0})}de(h)}}),{rect:e}}function ye(o,t){let e=t[0]-o[0],n=t[1]-o[1];return Math.hypot(e,n)}function we(o){if(!o.value)return[0,0];let t=window.getComputedStyle(o.value).transform;if(t==="none")return[0,0];let e=t.match(/matrix\((.+)\)/);if(!e)return[0,0];let n=e[1].split(", ");return[Number.parseFloat(n[4])||0,Number.parseFloat(n[5])||0]}function V(o){typeof o>"u"||typeof o.preventDefault!="function"||o.preventDefault()}function Ne(o,t){Object.assign(o.style,t)}function De(o){let{handleWheel:t,handleTouchStart:e,handleKeyDown:n}=o;function l(c){if(!(typeof window>"u"))switch(c){case"on":window.addEventListener("wheel",V,{passive:!1}),window.addEventListener("touchmove",V,{passive:!1}),window.addEventListener("wheel",t),window.addEventListener("touchstart",e),window.addEventListener("keydown",n);break;case"off":window.removeEventListener("wheel",V),window.removeEventListener("touchmove",V),window.removeEventListener("wheel",t),window.removeEventListener("touchstart",e),window.removeEventListener("keydown",n);break}}return{toggleEventListener:l}}function Ie(o,t){let{zoomStep:e,zoomMax:n,zoomMin:l,dblClickZoomTo:c}=t,h=m(!1),s=m(0),L=m(0),i=m(1),u=0,v=0,p=0,w=0,T=0;Y(()=>{o.value&&(o.value.style.cursor=h.value?"grabbing":"grab")});let z=y(()=>{let r=s.value===0?"-50%":`${s.value}px`,d=L.value===0?"-50%":`${L.value}px`;return`translate(${r}, ${d}) scale(${i.value})`}),S=()=>{o.value&&Ne(o.value,{transform:z.value})},f=(r=0,d)=>{d!==void 0?i.value=d:i.value+=r,i.value=Math.max(l,Math.min(n,i.value)),S()},b=r=>{f(r.deltaY<0?e:-e)},g=()=>{f(0,i.value>1?1:c)},k=r=>{if(o.value){if(r.touches.length===2){let[d,E]=[r.touches[0],r.touches[1]],N=ye([d.pageX,d.pageY],[E.pageX,E.pageY]),j=N/u;f(0,i.value*j),u=N}else if(r.touches.length===1){let d=r.touches[0],E=d.pageX-v,N=d.pageY-p;s.value=w+E,L.value=T+N,S()}}},M=()=>{document.removeEventListener("touchmove",k),document.removeEventListener("touchend",M)},q=r=>{if(o.value){if(r.touches.length===2){let[d,E]=[r.touches[0],r.touches[1]];u=ye([d.pageX,d.pageY],[E.pageX,E.pageY])}else if(r.touches.length===1){let d=r.touches[0];v=d.pageX,p=d.pageY;let E=we(o);w=E[0],T=E[1]}document.addEventListener("touchmove",k),document.addEventListener("touchend",M)}},O=r=>{if(!o.value)return;let d=r.clientX-v,E=r.clientY-p;s.value=w+d,L.value=T+E,S()},H=()=>{h.value=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)},_=r=>{if(!o.value)return;h.value=!0,v=r.clientX,p=r.clientY;let d=we(o);w=d[0],T=d[1],document.addEventListener("mousemove",O),document.addEventListener("mouseup",H)},W=()=>{s.value=0,L.value=0,i.value=1},A=()=>{document.removeEventListener("wheel",b),document.removeEventListener("touchstart",q),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",M),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)};return Z(A),{handleWheel:b,handleTouchStart:q,handleDblclick:g,handleMouseDown:_,initTransformer:W,cleanupListeners:A}}function Be(){let o=m(typeof window<"u"?window.innerWidth:0),t=m(typeof window<"u"?window.innerHeight:0),e=m(typeof window<"u"?window.scrollX:0),n=m(typeof window<"u"?window.scrollY:0),l=()=>{typeof window>"u"||(o.value=window.innerWidth,t.value=window.innerHeight)},c=()=>{typeof window>"u"||(e.value=window.scrollX||window.pageXOffset,n.value=window.scrollY||window.pageYOffset)};return $(()=>{l(),c(),window.addEventListener("resize",l,{passive:!0}),window.addEventListener("scroll",c,{passive:!0})}),Z(()=>{typeof window>"u"||(window.removeEventListener("resize",l),window.removeEventListener("scroll",c))}),{width:o,height:t,scrollX:e,scrollY:n}}var x={duration:500,maskBgColor:"black",maskOpacity:.1,previewZIndex:1e3,previewMaxWidth:"80vw",previewMaxHeight:"80vh",zoomStep:.2,zoomMin:.2,zoomMax:10,dblClickZoom:!0,dblClickZoomTo:2},Oe={displaying:{type:Boolean,default:void 0},applyingPreviewStyles:{type:Boolean,default:void 0},isAnimating:{type:Boolean,default:void 0},src:{type:String,required:!0},alt:String,width:[String,Number],height:[String,Number],duration:{type:Number,default:x.duration},maskBgColor:{type:String,default:x.maskBgColor},maskOpacity:{type:Number,default:x.maskOpacity},previewZIndex:{type:Number,default:x.previewZIndex},previewMaxWidth:{type:[String,Number],default:x.previewMaxWidth},previewMaxHeight:{type:[String,Number],default:x.previewMaxHeight},zoomStep:{type:Number,default:x.zoomStep},zoomMin:{type:Number,default:x.zoomMin},zoomMax:{type:Number,default:x.zoomMax},dblClickZoom:{type:Boolean,default:x.dblClickZoom},dblClickZoomTo:{type:Number,default:x.dblClickZoomTo}},$e={"update:displaying":o=>!0,"update:applyingPreviewStyles":o=>!0,"update:isAnimating":o=>!0,displayChange:o=>!0,previewStylesChange:o=>!0,animatingChange:o=>!0},Ye=["src"],Xe={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem"}},_e=["src","alt"],We={key:0,style:{"font-size":"0.8rem",color:"#666"}},be=ve({name:"HanaImgViewer",__name:"HanaImgViewer",props:Oe,emits:$e,setup(o,{emit:t}){let e=o,n=t,l=m(!1);$(()=>{l.value=!0});let c=m(null),h=m(null),s=m(null),L=m(!1),i=m(!1),u=m(!1),v=y({get:()=>e.displaying!==void 0?e.displaying:L.value,set:a=>{e.displaying!==void 0?n("update:displaying",a):L.value=a,n("displayChange",a)}}),p=y({get:()=>e.applyingPreviewStyles!==void 0?e.applyingPreviewStyles:i.value,set:a=>{e.applyingPreviewStyles!==void 0?n("update:applyingPreviewStyles",a):i.value=a,n("previewStylesChange",a)}}),w=y({get:()=>e.isAnimating!==void 0?e.isAnimating:u.value,set:a=>{e.isAnimating!==void 0?n("update:isAnimating",a):u.value=a,n("animatingChange",a)}});I(()=>e.displaying,a=>{a!==void 0&&a!==L.value&&(L.value=a)}),I(()=>e.applyingPreviewStyles,a=>{a!==void 0&&a!==i.value&&(i.value=a)}),I(()=>e.isAnimating,a=>{a!==void 0&&a!==u.value&&(u.value=a)});function T(){w.value=!0,setTimeout(()=>{w.value=!1},e.duration)}let z=y(()=>({width:(typeof e.width=="number"?`${e.width}px`:e.width)??"fit-content",height:(typeof e.height=="number"?`${e.height}px`:e.height)??"fit-content",visibility:v.value?"hidden":"visible"}));function S(){w.value||(T(),v.value?(p.value=!1,setTimeout(()=>{v.value=!1},e.duration)):v.value=!0)}let f=ue(null);$(()=>{f.value=Ie(s,e)}),pe(()=>{f.value?.cleanupListeners()});let b=m({}),{rect:g}=He(c,{throttle:!0,throttleDelay:100}),k=y(()=>g.value?g.value.width/g.value.height:0),{width:M,height:q,scrollX:O,scrollY:H}=Be(),_=m(0),W=m(0);I(g,()=>{_.value=O.value,W.value=H.value});let A=y(()=>M.value/q.value),r=y(()=>`${e.duration}ms`),d=y(()=>g.value&&k.value>A.value?`${g.value.width}px`:"auto"),E=y(()=>g.value?k.value>A.value?"auto":`${g.value.height}px`:"auto"),N=y(()=>g.value?`${g.value.top+W.value}px`:"0px"),j=y(()=>g.value?`${g.value.left+_.value}px`:"0px"),Se=y(()=>k.value>A.value?`${e.previewMaxWidth}`:"auto"),ke=y(()=>k.value>A.value?"auto":`${e.previewMaxHeight}`),xe=y(()=>`calc(50vh + ${H.value}px)`);function Me(a){a.key==="Escape"&&v.value&&S()}let R=m({toggleEventListener:a=>{}});Y(()=>{f.value&&(R.value=De({handleWheel:f.value.handleWheel,handleTouchStart:f.value.handleTouchStart,handleKeyDown:Me}))});let Te=y(()=>({opacity:p.value?e.maskOpacity:0})),qe=y(()=>({transition:w.value?`all ${r.value}`:"none",width:p.value?Se.value:d.value,height:p.value?ke.value:E.value,top:p.value?xe.value:N.value,left:p.value?"50%":j.value,transform:p.value?"translate(-50%, -50%)":"none"}));return Y(()=>{f.value?.initTransformer(),v.value?(typeof document<"u"&&(document.body.style.overflow="hidden"),requestAnimationFrame(()=>{p.value=!0})):typeof document<"u"&&(document.body.style.overflow="auto")}),I([v,w],([a,F],[oe,ne])=>{if(!f.value)return;let Ae=a&&!F&&oe&&ne&&p.value,Ce=a&&F&&oe&&!ne;Ae&&(b.value={dblclick:f.value.handleDblclick,mousedown:f.value.handleMouseDown},R.value.toggleEventListener("on")),Ce&&(R.value.toggleEventListener("off"),b.value={})}),(a,F)=>(C(),X(he,null,[l.value?(C(),te(ee,{key:0,to:"body"},[v.value?(C(),X("div",{key:0,ref_key:"maskRef",ref:h,style:Q({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:a.maskBgColor,zIndex:a.previewZIndex-1,transition:`all ${r.value}`,opacity:Te.value.opacity}),onClick:S},null,4)):B("",!0)])):B("",!0),l.value?(C(),te(ee,{key:1,to:"body"},[v.value?(C(),X("img",fe({key:0,ref_key:"previewerRef",ref:s,src:a.src,draggable:"false",style:{position:"absolute",objectFit:"cover",cursor:"grab",zIndex:a.previewZIndex,...qe.value}},me(b.value,!0)),null,16,Ye)):B("",!0)])):B("",!0),P("div",Xe,[P("div",{style:Q(z.value)},[P("img",{ref_key:"imgRef",ref:c,src:a.src,alt:a.alt,style:{width:"100%",height:"100%","object-fit":"cover",cursor:"pointer"},onClick:S},null,8,_e)],4),a.alt?(C(),X("span",We,ce(a.alt),1)):B("",!0)])],64))}});var Ee=o=>{document.querySelectorAll(`${o} .md img:not(.emoji):not(.vemoji)`).forEach(t=>{let e=t,n=e.src,l=document.createElement("div");e.replaceWith(l),ge(be,{src:n,maskOpacity:.8}).mount(l)})};var tt=()=>{if(!document.querySelector(".md"))return;Ee(".post.block"),document.querySelector(".post.block").oncopy=t=>{if(J(LOCAL.copyright),LOCAL.nocopy){t.preventDefault();return}let e=document.getElementById("copyright");if(window.getSelection().toString().length>ae.experiments.copyrightLength&&e){t.preventDefault();let n="# "+e.querySelector(".author").innerText,l="# "+e.querySelector(".link").innerText,c="# "+e.querySelector(".license").innerText,h=n+"<br>"+l+"<br>"+c+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),s=n+`
`+l+`
`+c+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(t.clipboardData)t.clipboardData.setData("text/html",h),t.clipboardData.setData("text/plain",s);else throw new Error("Clipboard API not supported")}},document.querySelectorAll("li ruby").forEach(t=>{let e=t.parentNode;t.parentNode.tagName!=="LI"&&(e=t.parentNode.parentNode),e.classList.add("ruby")}),document.querySelectorAll("ol[start]").forEach(t=>{t.style.counterReset="counter "+parseInt(t.getAttribute("start")-1)}),document.querySelectorAll(".md table").forEach(t=>{le(t,{className:"table-container"})}),document.querySelectorAll(".highlight > .table-container").forEach(t=>{t.className="code-container"}),document.querySelectorAll("figure.highlight").forEach(t=>{let e=t.querySelector(".code-container"),n=t.querySelector("figcaption");t.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');let l=t.querySelector(".copy-btn");LOCAL.nocopy?l.remove():(l.addEventListener("click",i=>{let u=i.currentTarget,v="",p="";e.querySelectorAll("pre").forEach(w=>{p+=v+w.innerText,v=`
`}),se(p,w=>{u.querySelector(".ic").className=w?"ic i-check":"ic i-times",u.blur(),J(LOCAL.copyright)})},{passive:!0}),l.addEventListener("mouseleave",i=>{setTimeout(()=>{i.target.querySelector(".ic").className="ic i-clipboard"},1e3)})),t.querySelector(".breakline-btn").addEventListener("click",i=>{let u=i.currentTarget;t.classList.contains("breakline")?(t.classList.remove("breakline"),u.querySelector(".ic").className="ic i-align-left"):(t.classList.add("breakline"),u.querySelector(".ic").className="ic i-align-justify")});let h=t.querySelector(".fullscreen-btn"),s=()=>{t.classList.remove("fullscreen"),t.scrollTop=0,G.classList.remove("fullscreen"),h.querySelector(".ic").className="ic i-expand"},L=()=>{if(t.classList.contains("fullscreen")){if(s(),e&&e.querySelectorAll("tr").length>15){let i=e.querySelector(".show-btn");e.style.maxHeight="300px",i.classList.remove("open")}U(t)}else if(t.classList.add("fullscreen"),G.classList.add("fullscreen"),h.querySelector(".ic").className="ic i-compress",e&&e.querySelectorAll("tr").length>15){let i=e.querySelector(".show-btn");e.style.maxHeight="",i.classList.add("open")}};if(h.addEventListener("click",L),n&&n.addEventListener("click",L),e&&e.querySelectorAll("tr").length>15){e.style.maxHeight="300px",e.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');let i=e.querySelector(".show-btn"),u=()=>{e.style.maxHeight="300px",i.classList.remove("open")},v=()=>{e.style.maxHeight="",i.classList.add("open")};i.addEventListener("click",()=>{i.classList.contains("open")?(s(),u(),U(e)):v()})}}),document.querySelectorAll("pre.mermaid > svg").forEach(t=>{let e=t;e.style.maxWidth=""}),document.querySelectorAll(".reward button").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();let n=document.getElementById("qr");ie(n)==="inline-flex"?K(n,0):K(n,1,()=>{re(n,"inline-flex")})})}),document.querySelectorAll(".quiz > ul.options li").forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("correct")?(t.classList.toggle("right"),t.parentNode.parentNode.classList.add("show")):t.classList.toggle("wrong")})}),document.querySelectorAll(".quiz > p").forEach(t=>{t.addEventListener("click",()=>{t.parentNode.classList.toggle("show")})}),document.querySelectorAll(".quiz > p:first-child").forEach(t=>{let e=t.parentNode,n="choice";(e.classList.contains("true")||e.classList.contains("false"))&&(n="true_false"),e.classList.contains("multi")&&(n="multiple"),e.classList.contains("fill")&&(n="gap_fill"),e.classList.contains("essay")&&(n="essay"),t.setAttribute("data-type",LOCAL.quiz[n])}),document.querySelectorAll(".quiz .mistake").forEach(t=>{t.setAttribute("data-type",LOCAL.quiz.mistake)}),document.querySelectorAll("div.tags a").forEach(t=>{t.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]});let o=document.querySelectorAll(".show-btn .i-angle-down");if(o.length){let t=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting?o.forEach(l=>{l.classList.remove("stop-animation")}):o.forEach(l=>{l.classList.add("stop-animation")})})},{root:null,threshold:.5});o.forEach(e=>{t.observe(e)})}};export{tt as postBeauty};
